##简介

铁路购票服务是与大家生活和出行相关的关键系统，包括会员、购票、订单、支付和网关等服务。
帮助用户完成互联网在线购票，提高居民买票效率以及减少售票人员工作。完成会员注册、车票查询、车票下单以及支付等业务。底层采用缓存、消息队列以及分库分表等技术支持海量用户购票以及数据存储。

铁路购票项目中包含了缓存、消息队列、分库分表、设计模式等代码。


![](https://images-machen.oss-cn-beijing.aliyuncs.com/12306-base-biz-20230801.png)


## 技术架构

在系统设计中，采用JDK17 + SpringBoot3&SpringCloud 微服务架构，构建高并发、大数据量下仍然能提供高效可靠的购票服务。

核心技术：SpringBoot + SpringCloudAlibaba + RocketMQ + ShardingSphere + Redis + MySQL + Sentinel + Hippo4j

核心业务&技术：

● 判断用户名是否已被注册接口，如何应对海量并发请求带来的缓存穿透问题？

● 用户敏感数据存储到数据库后，如何避免被黑客将数据库攻破并窃取用户信息？

● 海量并发查询车票列表接口，如何应对海量请求的查询，以及众多条件如何满足？

● 海量并发下单接口，如何应对海量用户下单请求，如何进行限流以保证系统不崩溃？以及如何正确落库？

● 用户下单后如何保障列车座位余票缓存和数据库一致性？非常典型的数据库和缓存一致性问题。

● 用户下单十分钟未支付，如何取消用户未付款订单？如果用户已支付，如何避免错误取消？

● 系统中用了消息队列后，如何确保消息不会被重复消费，保证业务系统消费幂等性？

● 海量用户和订单数据如何存储，通过什么分库分表规则保障系统高性能响应用户查询等请求？

● 如何通过分库分表基因算法保障分片键的易用性？比如一个订单号字段同时支持订单号和用户 ID 查询。

● 海量数据分库分表后，为什么选择雪花算法作为 ID？如何保障雪花算法在大规模集群下生成不重复？



## 如何使用

铁路购票系统实现了与12306官网极为接近的业务逻辑和 UI 展示。（ 前端文件已打包，可以放在nginx上运行）

### 1. 车票查询功能

![](https://images-machen.oss-cn-beijing.aliyuncs.com/image-20230716114538112.png)

### 2. 提交订单页，选择乘车人下单

![](https://images-machen.oss-cn-beijing.aliyuncs.com/image-20231006135057984.png)

### 3. 高铁在线选座页面

![](https://images-machen.oss-cn-beijing.aliyuncs.com/image-20231006123150513.png)

### 4. 订单确认页

![](https://images-machen.oss-cn-beijing.aliyuncs.com/image-20231006123458176.png)




