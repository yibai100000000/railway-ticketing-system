(function(){var e={46700:function(e,t,a){var l={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn-bd":76225,"./bn-bd.js":76225,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-in":44175,"./en-in.js":44175,"./en-nz":76319,"./en-nz.js":76319,"./en-sg":31662,"./en-sg.js":31662,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-mx":96112,"./es-mx.js":96112,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fil":42549,"./fil.js":42549,"./fo":94694,"./fo.js":94694,"./fr":94470,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":94470,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-deva":27884,"./gom-deva.js":27884,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./oc-lnc":92135,"./oc-lnc.js":92135,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":85893,"./ss.js":85893,"./sv":98760,"./sv.js":98760,"./sw":74449,"./sw.js":74449,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tk":19005,"./tk.js":19005,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-mo":99807,"./zh-mo.js":99807,"./zh-tw":74152,"./zh-tw.js":74152};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}n.keys=function(){return Object.keys(l)},n.resolve=s,e.exports=n,n.id=46700},66292:function(e,t,a){"use strict";var l=a(49963),n=a(66252),s=a(2262),i=a(3577),r=a(52245),d=a(65305),o=a(22201),u=a(2497),c=a(13193),p=a(61446),m=(a(57658),a(62447)),w=a(55678),v=a(72286),f=a(61034),_=a(62382),y=a(40542),S=a(50327),g=a(6154),U=a(31955);U.Z.get("token");const h=g.Z.create({timeout:18e5});h.interceptors.request.use((e=>e),(e=>e)),h.interceptors.response.use((e=>(401===e.code&&(p.ZP.error("用户未登录或已过期！"),window.location.href="login"),e)),(e=>(console.log(e,"error"),401===e.response.status&&(p.ZP.error("用户未登录或已过期！"),window.location.href="login"),Promise.reject(e))));var b=h;const k=async e=>{const{data:t}=await b({method:"POST",url:"/api/user-service/v1/login",data:e});return b.defaults.headers.common["Authorization"]=t.data?.accessToken,t},Z=async e=>{const{data:t}=await b({method:"POST",url:"/api/user-service/register",data:e});return t},x=async e=>{const{data:t}=await b({method:"GET",url:"/api/ticket-service/ticket/query",params:e});return t},W=async e=>{const{data:t}=await b({method:"GET",url:"/api/user-service/passenger/query",params:e});return t},j=async e=>{const{data:t}=await b({method:"POST",url:"/api/user-service/passenger/remove",data:e});return t},z=async e=>{const{data:t}=await b({method:"POST",url:"/api/user-service/passenger/save",data:e});return t},T=async e=>{const{data:t}=await b({method:"POST",url:"/api/user-service/passenger/update",data:e});return t},C=async e=>{const{data:t}=await b({method:"GET",url:"/api/user-service/logout",data:e});return b.defaults.headers.common["Authorization"]=null,t},P=async e=>{const{data:t}=await b({method:"POST",url:"/api/ticket-service/ticket/purchase/v2",data:e});return t},I=async e=>{const{data:t}=await b({method:"GET",url:"/api/order-service/order/ticket/query",params:e});return t},D=async e=>{const{data:t}=await b({method:"POST",url:"/api/pay-service/pay/create",data:e});return t},q=async()=>{const{data:e}=await b({method:"GET",url:"/api/ticket-service/station/all"});return e},L=async e=>{const{data:t}=await b({method:"GET",url:"/api/user-service/query",params:e});return t},R=async e=>{const{data:t}=await b({method:"GET",url:"/api/ticket-service/train-station/query",params:e});return t},O=async e=>{const{data:t}=await b({method:"GET",url:"/api/order-service/order/ticket/page",params:e});return t},N=async e=>{const{data:t}=await b({method:"POST",url:"/api/ticket-service/ticket/cancel",data:e});return t},H=async e=>{const{data:t}=await b({method:"POST",url:"/api/user-service/update",data:e});return t},M=async e=>{const{data:t}=await b({method:"GET",url:"/api/pay-service/pay/query/order-sn",params:e});return t},Y=async e=>{const{data:t}=await b({method:"GET",url:"/api/order-service/order/ticket/self/page",params:e});return t},K=async e=>{const{data:t}=await b({method:"POST",url:"/api/ticket-service/ticket/refund",data:e})};var A=a(44924),$=a(73700);const B=e=>((0,n.dD)("data-v-5ba58656"),e=e(),(0,n.Cn)(),e),E={class:"login-wrapper"},F=B((()=>(0,n._)("div",{class:"title-wrapper"},null,-1))),G={class:"login-reg-panel"},V={class:"login-info-box"},J=B((()=>(0,n._)("h2",null,"已有账号？",-1))),Q=B((()=>(0,n._)("h3",null,"欢迎登录账号！",-1))),X={class:"register-info-box"},ee=B((()=>(0,n._)("h2",null,"没有账号？",-1))),te=B((()=>(0,n._)("h3",null,"欢迎注册账号！",-1))),ae={key:0,class:"login-show"},le=B((()=>(0,n._)("h1",{class:"title"},"登录",-1))),ne={class:"action-btn"},se=B((()=>(0,n._)("a",{href:""},"忘记密码？",-1))),ie={key:1,class:"register-show"},re=B((()=>(0,n._)("h1",{class:"title"},"注册",-1))),de={class:"action-btn"},oe=B((()=>(0,n._)("a",null,null,-1))),ue={class:"wrapper"},ce=B((()=>(0,n._)("h1",{class:"tip-text"},(0,i.zw)("扫码下方二维码，关注后回复：12306，获取拿个offer-12306在线购票系统人机验证码"),-1))),pe=B((()=>(0,n._)("img",{src:"https://images-machen.oss-cn-beijing.aliyuncs.com/1_990064918_171_86_3_722467528_78457b21279219802d38525d32a77f39.png",alt:"微信公众号"},null,-1))),me={class:"code-input"},we=B((()=>(0,n._)("label",{class:"code-label"},"验证码",-1)));var ve={__name:"index",setup(e){const t=m.ZP.useForm,a=(0,s.qj)({usernameOrMailOrPhone:"admin",password:"admin123456",code:""}),l=(0,s.qj)({open:!1}),r=(0,s.qj)({usernameOrMailOrPhone:[{required:!0,message:"请输入用户名或者邮件或者手机号"}],password:[{required:!0,message:"请输入密码"}]}),{validate:d,validateInfos:u}=t(a,r),c=(0,s.qj)({username:"admin",password:"admin123456",realName:"",idType:0,idCard:"",phone:"",mail:""}),g=(0,s.qj)({username:[{required:!0,message:"请输入用户名"}],password:[{required:!0,message:"请输入密码"}],realName:[{required:!0,message:"请输入姓名"}],idType:[{required:!0,message:"请选择证件类型"}],idCard:[{required:!0,message:"请输入证件号码"}],phone:[{required:!0,message:"请输入电话号码"}],mail:[{required:!0,message:"请输入邮箱"}]}),{validate:h,validateInfos:b}=t(c,g);let x=(0,s.iH)("login");const W=(0,o.tv)(),j=()=>{-1===location.host.indexOf("12306")?d().then((()=>{k({...a}).then((e=>{e.success?(U.Z.set("token",e.data?.accessToken),U.Z.set("username",e.data?.username),U.Z.set("userId",e.data?.userId),W.push("/ticketSearch")):p.ZP.error(e.message)}))})):d().then((()=>{l.open=!0})).catch((e=>console.log(e)))},z=()=>{if(!a.code)return p.ZP.error("请输入验证码");d().then((()=>{k({usernameOrMailOrPhone:a.usernameOrMailOrPhone,password:a.code}).then((e=>{e.success?(U.Z.set("token",e.data?.accessToken),U.Z.set("userId",e.data?.userId),U.Z.set("username",e.data?.username),W.push("/ticketSearch")):p.ZP.error(e.message)}))})).catch((e=>console.log(e)))},T=()=>{if(-1!==location.host.indexOf("12306"))return p.ZP.info("关注公众获取验证码登录哦！"),void(x.value="login");h().then((()=>{Z(c).then((e=>{e.success?(p.ZP.success("注册成功"),x.value="login",a.usernameOrMailOrPhone=e.data?.username,a.password=""):p.ZP.error(e.message)}))})).catch((e=>console.log(e)))};return(e,t)=>((0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",E,[F,(0,n._)("div",G,[(0,n._)("div",V,[J,Q,(0,n._)("button",{onClick:t[0]||(t[0]=()=>(0,s.dq)(x)?x.value="login":x="login")},"去登录")]),(0,n._)("div",X,[ee,te,(0,n._)("button",{onClick:t[1]||(t[1]=()=>(0,s.dq)(x)?x.value="register":x="register")},"去注册")]),(0,n._)("div",{class:(0,i.C_)(["white-panel",{"white-panel-left":"register"===(0,s.SU)(x)}])},["login"===(0,s.SU)(x)?((0,n.wg)(),(0,n.iD)("div",ae,[le,(0,n.Wm)((0,s.SU)(m.ZP),{name:"basic",autocomplete:"off"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(w.Z),(0,i.vs)((0,n.F4)((0,s.SU)(u).usernameOrMailOrPhone)),{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(v.ZP),{size:"large",value:a.usernameOrMailOrPhone,"onUpdate:value":t[2]||(t[2]=e=>a.usernameOrMailOrPhone=e),placeholder:"用户名"},{prefix:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(A.Z),{style:{color:"rgba(0, 0, 0, 0.25)"}})])),_:1},8,["value"])])),_:1},16),(0,n.Wm)((0,s.SU)(w.Z),(0,i.vs)((0,n.F4)((0,s.SU)(u).password)),{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(f.Z),{size:"large",value:a.password,"onUpdate:value":t[3]||(t[3]=e=>a.password=e),placeholder:"密码"},{prefix:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)($.Z),{style:{color:"rgba(0, 0, 0, 0.25)"}})])),_:1},8,["value"])])),_:1},16),(0,n.Wm)((0,s.SU)(w.Z),null,{default:(0,n.w5)((()=>[(0,n._)("div",ne,[se,(0,n.Wm)((0,s.SU)(_.Z),{type:"primary",style:{backgroundColor:"#202020",border:"none"},onClick:j},{default:(0,n.w5)((()=>[(0,n.Uk)("登录")])),_:1})])])),_:1})])),_:1})])):((0,n.wg)(),(0,n.iD)("div",ie,[re,(0,n.Wm)((0,s.SU)(m.ZP),{name:"basic",autocomplete:"off","label-col":{span:6}},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(w.Z),(0,n.dG)({label:"用户名"},(0,s.SU)(b).username),{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(v.ZP),{value:c.username,"onUpdate:value":t[4]||(t[4]=e=>c.username=e),placeholder:"请输入用户名"},null,8,["value"])])),_:1},16),(0,n.Wm)((0,s.SU)(w.Z),(0,n.dG)({label:"密码"},(0,s.SU)(b).password),{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(f.Z),{value:c.password,"onUpdate:value":t[5]||(t[5]=e=>c.password=e),placeholder:"密码"},null,8,["value"])])),_:1},16),(0,n.Wm)((0,s.SU)(w.Z),(0,n.dG)({label:"姓名"},(0,s.SU)(b).realName),{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(v.ZP),{value:c.realName,"onUpdate:value":t[6]||(t[6]=e=>c.realName=e),placeholder:"请输入姓名"},null,8,["value"])])),_:1},16),(0,n.Wm)((0,s.SU)(w.Z),(0,n.dG)({label:"证件类型"},(0,s.SU)(b).idType),{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(y.ZP),{options:[{value:0,label:"中国居民身份证"}],value:c.idType,"onUpdate:value":t[7]||(t[7]=e=>c.idType=e),placeholder:"请选择证件类型"},null,8,["value"])])),_:1},16),(0,n.Wm)((0,s.SU)(w.Z),(0,n.dG)({label:"证件号码"},(0,s.SU)(b).idCard),{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(v.ZP),{value:c.idCard,"onUpdate:value":t[8]||(t[8]=e=>c.idCard=e),placeholder:"请输入证件号码"},null,8,["value"])])),_:1},16),(0,n.Wm)((0,s.SU)(w.Z),(0,n.dG)({label:"手机号码"},(0,s.SU)(b).phone),{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(v.ZP),{value:c.phone,"onUpdate:value":t[9]||(t[9]=e=>c.phone=e),placeholder:"请输入手机号码"},null,8,["value"])])),_:1},16),(0,n.Wm)((0,s.SU)(w.Z),(0,n.dG)({label:"邮件"},(0,s.SU)(b).mail),{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(v.ZP),{value:c.mail,"onUpdate:value":t[10]||(t[10]=e=>c.mail=e),placeholder:"请输入邮箱账号"},null,8,["value"])])),_:1},16),(0,n.Wm)((0,s.SU)(w.Z),null,{default:(0,n.w5)((()=>[(0,n._)("div",de,[oe,(0,n.Wm)((0,s.SU)(_.Z),{type:"primary",onClick:T,style:{backgroundColor:"#202020",border:"none"}},{default:(0,n.w5)((()=>[(0,n.Uk)("注册")])),_:1})])])),_:1})])),_:1})]))],2)])]),(0,n.Wm)((0,s.SU)(S.Z),{visible:l.open,title:"人机认证",wrapClassName:"code-modal",width:"450px",onCancel:t[12]||(t[12]=e=>l.open=!1),onOk:z,centered:""},{default:(0,n.w5)((()=>[(0,n._)("div",ue,[ce,pe,(0,n._)("div",me,[we,(0,n.Wm)((0,s.SU)(v.ZP),{value:a.code,"onUpdate:value":t[11]||(t[11]=e=>a.code=e),style:{width:"300px"}},null,8,["value"])])])])),_:1},8,["visible"])],64))}},fe=a(83744);const _e=(0,fe.Z)(ve,[["__scopeId","data-v-5ba58656"]]);var ye=_e,Se=a(97139),ge=a(87863),Ue=a(24871),he=a(65494),be=a(52642),ke=a(41460),Ze=a(78099),xe=a(53805),We=a(63789),je=a(9370),ze=a(48084),Te=a(40904),Ce=a(45542),Pe=a(41634),Ie=a(66130),De=a(27484),qe=a.n(De);const Le=e=>{switch(e){case 0:return"周天";case 1:return"周一";case 2:return"周二";case 3:return"周三";case 4:return"周四";case 5:return"周五";case 6:return"周六"}},Re=e=>e&&e>20?{color:"green",label:"有"}:e&&e<20?{color:"black",label:e}:0===e?{color:"gray",label:"无"}:{color:"gray"},Oe=[{label:"成人票",value:0},{label:"学生票",value:1}],Ne=[{label:"成人",value:0},{label:"儿童",value:1},{label:"学生",value:2},{label:"残疾军人",value:3}],He=[{label:"复",value:"0",color:"#f29c58"},{label:"智",value:"1",color:"#7db08d"},{label:"静",value:"2",color:"#64a0f6"},{label:"铺",value:"3",color:"#5d9bf6"}],Me=[{label:"待支付",value:0},{label:"已支付",value:10},{label:"已进站",value:20},{label:"已取消",value:30},{label:"已退票",value:40},{label:"已改签",value:50}],Ye=[{label:"中国居民身份证",value:0}],Ke=[{label:"商务座",code:0},{label:"一等座",code:1},{label:"二等座",code:2},{label:"二等包座",code:3},{label:"一等卧",code:4},{label:"二等卧",code:5},{label:"软卧",code:6},{label:"硬卧",code:7},{label:"硬座",code:8},{label:"高级软卧",code:9},{label:"动卧",code:10},{label:"软座",code:11},{label:"特等座",code:12},{label:"无座",code:13},{label:"其他",code:14}],Ae=[{code:0,label:"GC-高铁城际"},{code:1,label:"D-动车"},{code:2,label:"Z-直达"},{code:3,label:"T-特快"},{code:4,label:"K-快速"},{code:5,label:"其他"},{code:6,label:"复兴号"},{code:7,label:"智能动车组"}],$e=[{img:"https://epay.12306.cn/pay/pages/web/images/bank_zfb.gif",name:"支付宝",value:0},{img:"https://epay.12306.cn/pay/pages/web/images/bank_wx.gif",name:"微信",value:1},{img:"https://epay.12306.cn/pay/pages/web/images/bank_gsyh2.gif",name:"工商银行",value:10},{img:"https://epay.12306.cn/pay/pages/web/images/bank_nyyh2.gif",name:"农业银行",value:9},{img:"https://epay.12306.cn/pay/pages/web/images/bank_zgyh2.gif",name:"中国银行",value:8},{img:"https://epay.12306.cn/pay/pages/web/images/bank_jsyh2.gif",name:"建设银行",value:7},{img:"https://epay.12306.cn/pay/pages/web/images/bank_zsyh2.gif",name:"招商银行",value:6},{img:"https://epay.12306.cn/pay/pages/web/images/bank_ycyh.gif",name:"邮储银行",value:5},{img:"https://epay.12306.cn/pay/pages/web/images/bank_zgyl.gif",name:"中国银联",value:4},{img:"https://epay.12306.cn/pay/pages/web/images/bank_ztytk.gif",name:"中铁银通卡",value:3},{img:"https://epay.12306.cn/pay/pages/web/images/bank_wk.gif",name:"国际卡",value:12},{img:"https://epay.12306.cn/pay/pages/web/images/bank_jtyh.png",name:"交通银行",value:13}],Be=[{value:"0",label:"中国"}],Ee=[{value:0,label:"通过"},{value:1,label:"未通过"}],Fe=e=>((0,n.dD)("data-v-3d1b320c"),e=e(),(0,n.Cn)(),e),Ge={style:{width:"100%",textAlign:"center",alignItems:"center",lineHeight:"32px"}},Ve={class:"card-container"},Je=Fe((()=>(0,n._)("span",{class:"spacial-label"},"车次类型",-1))),Qe=Fe((()=>(0,n._)("span",{class:"spacial-label"},"出发车站",-1))),Xe=Fe((()=>(0,n._)("span",{class:"spacial-label"},"到达车站",-1))),et=Fe((()=>(0,n._)("span",{class:"spacial-label"},"车次席别",-1))),tt={class:"city-name"},at={class:"city-name"},lt={class:"time-title"},nt={class:"time-title"},st={style:{fontWeight:"bolder"}},it={class:"custome-table"},rt={style:{color:"#fc8302"}},dt={style:{color:"#fc8302"}},ot={style:{color:"#fc8302"}},ut={style:{color:"#fc8302"}},ct={style:{color:"#fc8302"}},pt={style:{color:"#fc8302"}},mt={style:{color:"#fc8302"}},wt={style:{color:"#fc8302"}},vt={style:{color:"#fc8302"}},ft={style:{color:"#fc8302"}},_t={style:{color:"#fc8302"}},yt=["onClick"],St={style:{display:"flex","font-size":"10px","font-weight":"bold",width:"100%","line-height":"unset","justify-content":"center"}},gt=Fe((()=>(0,n._)("div",null,"出发站",-1))),Ut=Fe((()=>(0,n._)("div",null,"到达站",-1))),ht=Fe((()=>(0,n._)("div",null,"出发时间",-1))),bt=Fe((()=>(0,n._)("div",null,"到达时间",-1))),kt=Fe((()=>(0,n._)("div",null,"二等座",-1))),Zt=Fe((()=>(0,n._)("div",null,"二等包座",-1))),xt=Fe((()=>(0,n._)("div",null,"商务座",-1))),Wt=Fe((()=>(0,n._)("div",null,"特等座",-1))),jt=Fe((()=>(0,n._)("div",null,"硬卧",-1))),zt=Fe((()=>(0,n._)("div",null,"二等卧",-1))),Tt=Fe((()=>(0,n._)("div",null,"软卧",-1))),Ct=Fe((()=>(0,n._)("div",null,"一等卧",-1))),Pt=Fe((()=>(0,n._)("div",null," 如果查询结果中没有满足需求的车次，您还可以使用中转换乘功能，查询途中换乘一次的部分列车余票情况。 ",-1))),It=Fe((()=>(0,n._)("div",null," 显示的卧铺票价均为上铺票价，供您参考。具体票价以您确认支付时实际购买的铺别票价为准。如因运力原因或者其他不可控因素导致列车调度调整时，当前车型可能会发生变动 ",-1)));var Dt={__name:"index",setup(e){const t=m.ZP.useForm,a=[{value:0,label:"00:00-24:00"},{value:1,label:"00:00-06:00"},{value:2,label:"06:00-12:00"},{value:3,label:"12:00-18:00"},{value:4,label:"18:00-24:00"}],l=(0,s.qj)({fromStation:"BJP",toStation:"HZH",departureDate:qe()(),arrival_date:"",car_type:[],departure_stations:[],arrival_stations:[],departure:[],arrival:[],seat:[]}),r=(0,s.qj)({seatClassTypeListSelect:null,trainBrandListSelect:null,trainList:[],stationList:[],trainStationList:[],loading:!1}),d=(0,s.qj)({rawTrainList:[]});(0,n.YP)(l,(e=>{r.trainList=d.rawTrainList,e?.car_type?.length&&(r.trainList=r.trainList.filter((t=>{const a=t.trainBrand?.split(",");let l=!1;for(let n of a)e?.car_type?.includes(1*n)&&(l=!0);return l}))),e?.departure?.length&&(r.trainList=r.trainList.filter((t=>e?.departure?.includes(t.departure)))),e?.arrival?.length&&(r.trainList=r.trainList.filter((t=>e?.arrival?.includes(t.arrival)))),e?.seat?.length&&(r.trainList=r.trainList.filter((t=>{const a=t.seatClassList?.filter((t=>e.seat.includes(t.type)&&t.quantity))??[];return console.log("newValue.seat:::",e.seat),console.log("item.seatClassList:::",t.seatClassList),console.log("list:::",a),a.length})))}));const o=(0,s.iH)([]),u=(0,s.iH)([]),c=(0,s.iH)(!1),v=(0,s.iH)(!1),f=(0,s.iH)(!1),S=(0,s.iH)(!1),g=[{title:"车次",dataIndex:"trainNumber",slots:{customRender:"trainNumber"},key:"trainNumber",width:100,resizeble:!1,align:"center"},{key:"station",slots:{title:"customStaionTitle",customRender:"station"},width:100,ellipsis:!0,resizeble:!1,align:"left"},{dataIndex:"time",key:"time",slots:{title:"customTimeTitle",customRender:"time"},width:100,ellipsis:!0,resizeble:!1,align:"center"},{title:"历时",dataIndex:"duration",key:"duration",width:100,ellipsis:!0,resizeble:!1,align:"center"},{dataIndex:"seatClassList",key:"seat",slots:{title:"customSeatTitle",customRender:"highSpeedTrain"},width:80,ellipsis:!0,resizeble:!1,align:"center"},{title:"一等座",dataIndex:"seatClassList",slots:{customRender:"firstSeat"},key:"first_seat",width:80,ellipsis:!0,resizeble:!1,align:"center"},{dataIndex:"seatClassList",key:"second_seat",slots:{title:"customSecondSeatTitle",customRender:"secondSeat"},width:80,ellipsis:!0,resizeble:!1,align:"center"},{title:"动卧",dataIndex:"seatClassList",key:"bed",slots:{customRender:"bed"},width:80,ellipsis:!0,resizeble:!1},{title:"高级软卧",dataIndex:"seatClassList",key:"delux_soft_bed",slots:{customRender:"deluxSoftBed"},width:80,ellipsis:!0,resizeble:!1,align:"center"},{dataIndex:"seatClassList",key:"first_bed",slots:{title:"customFirstBedSeatTitle",customRender:"firstBed"},width:80,ellipsis:!0,resizeble:!1,align:"center"},{dataIndex:"seatClassList",key:"scond_hard_bed",slots:{title:"customScondHardSeadTitle",customRender:"scondHardBed"},width:80,ellipsis:!0,resizeble:!1,align:"center"},{title:"软座",dataIndex:"seatClassList",key:"first_soft_seat",slots:{customRender:"firstSoftSeat"},width:80,ellipsis:!0,resizeble:!1,align:"center"},{title:"硬座",dataIndex:"seatClassList",key:"hard_seat",slots:{customRender:"hardSeat"},width:80,ellipsis:!0,resizeble:!1,align:"center"},{title:"无座",dataIndex:"seatClassList",key:"no_seat",slots:{customRender:"noSeat"},width:80,ellipsis:!0,resizeble:!1,align:"center"},{title:"其他",dataIndex:"seatClassList",key:"other",slots:{customRender:"other"},width:80,ellipsis:!0,resizeble:!1,align:"center"},{title:"备注",dataIndex:"remark",slots:{customRender:"operation"},align:"center"}],U=[{title:"车次",key:"trainNumber",width:100,ellipsis:!0,resizeble:!1,align:"center"},{title:"车站",key:"station",width:100,ellipsis:!0,resizeble:!1,align:"center"},{title:"时间",key:"time",width:100,ellipsis:!0,resizeble:!1,align:"center"},{title:"历时",key:"duration",width:100,ellipsis:!0,resizeble:!1,align:"center"},{dataIndex:"seatClassList",key:"seat",slots:{title:"customSeatTitle",customRender:"highSpeedTrainPrice"},width:80,ellipsis:!0,resizeble:!1,align:"center"},{title:"一等座",dataIndex:"seatClassList",slots:{customRender:"firstSeatPrice"},key:"first_seat",width:80,ellipsis:!0,resizeble:!1,align:"center"},{dataIndex:"seatClassList",key:"second_seat",slots:{title:"customSecondSeatTitle",customRender:"secondSeatPrice"},width:80,ellipsis:!0,resizeble:!1,align:"center"},{title:"动卧",dataIndex:"seatClassList",key:"bed",slots:{customRender:"bedPrice"},width:80,ellipsis:!0,resizeble:!1,align:"center"},{title:"高级软卧",dataIndex:"seatClassList",key:"delux_soft_bed",slots:{customRender:"deluxSoftBedPrice"},width:90,ellipsis:!0,resizeble:!1,align:"center"},{dataIndex:"seatClassList",key:"first_bed",slots:{title:"customFirstBedSeatTitle",customRender:"firstBed"},width:80,ellipsis:!0,resizeble:!1,align:"center"},{dataIndex:"seatClassList",key:"scond_hard_bed",slots:{title:"customScondHardSeadTitle",customRender:"scondHardBedPrice"},width:80,ellipsis:!0,resizeble:!1,align:"center"},{title:"软座",dataIndex:"seatClassList",key:"first_soft_seat",slots:{customRender:"firstSoftSeat"},width:80,ellipsis:!0,resizeble:!1,align:"center"},{title:"硬座",dataIndex:"seatClassList",key:"hard_seat",slots:{customRender:"hardSeat"},width:80,ellipsis:!0,resizeble:!1,align:"center"},{title:"无座",dataIndex:"seatClassList",key:"no_seat",slots:{customRender:"noSeat"},width:80,ellipsis:!0,resizeble:!1,align:"center"},{title:"其他",dataIndex:"other",key:"other",slots:{customRender:"other"},width:80,ellipsis:!0,resizeble:!1,align:"center"},{title:"备注",dataIndex:"remark",slots:{customRender:"operation"},fixed:"right",align:"center"}],h=[{title:"站序",dataIndex:"sequence",key:"sequence"},{title:"站名",dataIndex:"departure",key:"departure"},{title:"到站时间",dataIndex:"arrivalTime",key:"arrivalTime"},{title:"出发时间",dataIndex:"departureTime",key:"departureTime"},{title:"停留时间",dataIndex:"stopoverTime",key:"stopoverTime"}],{resetFields:b,validate:k}=t(l),Z=new Array(15).fill(",").map(((e,t)=>qe()().add(t,"days"))),W=()=>{k().then((()=>{const{fromStation:e,toStation:t,departure:a,arrival:n,departureDate:i}=(0,s.IU)(l);x({fromStation:e,toStation:t,departure:a[0],arrival:n[0],departureDate:i.format("YYYY-MM-DD")}).then((e=>{if(!e.success)return p.ZP.error(e.message);e.data.trainList&&(r.trainList=e.data.trainList?.map((e=>({...e,key:e.trainId}))),d.rawTrainList=e.data.trainList?.map((e=>({...e,key:e.trainId})))),r.trainBrandListSelect=e.data.trainBrandList,r.seatClassTypeListSelect=e.data.seatClassTypeList,o.value=e.data.departureStationList,u.value=e.data.arrivalStationList}))}))},j=e=>{const t=e.format("MM-DD");return t===l.departureDate.format("MM-DD")?t+"　"+Le(e.day()):t},z=()=>{q().then((e=>{r.stationList=e.data}))},T=e=>e?"￥"+e:"";(0,n.bv)((()=>{x({fromStation:l.fromStation,toStation:l.toStation,departureDate:qe()(new Date).format("YYYY-MM-DD")}).then((e=>{if(!e.success)return p.ZP.error(e.message);e.data.trainList&&(r.trainList=e.data.trainList?.map((e=>({...e,key:e.trainId}))),d.rawTrainList=e.data.trainList?.map((e=>({...e,key:e.trainId})))),r.trainBrandListSelect=e.data.trainBrandList,r.seatClassTypeListSelect=e.data.seatClassTypeList,o.value=e.data.departureStationList,u.value=e.data.arrivalStationList})),z()}));const C=()=>{const[e,t]=[(0,s.IU)(l.fromStation),(0,s.IU)(l.toStation)];console.log(e,t),l.fromStation=t,l.toStation=e},P=e=>{R({trainId:e}).then((e=>{r.trainStationList=e.data,r.loading=!1}))},I=e=>{window.open(`buyTicket?trainNumber=${e.trainNumber}&&trainId=${e.trainId}&&${Object.entries(l)?.map((e=>`${e[0]}=${"departureDate"===e[0]?e[1].format("YYYY-MM-DD"):e[1]}`)).join("&&")}`)};return(e,t)=>((0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)((0,s.SU)(Se.Z),{direction:"vertical",size:"middle",style:{width:"100%"}},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(m.ZP),{layout:"inline",colon:!1,"label-col":{span:8},"wrapper-col":{span:16}},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Se.Z),{direction:"vertical",size:"middle",style:{width:"100%"}},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(ge.ZP),{style:{width:"100%"}},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Ue.Z),{style:{maxWidth:"1150px"}},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(he.Z),{span:5},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(w.Z),{label:"出发地"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(y.ZP),{value:l.fromStation,"onUpdate:value":t[0]||(t[0]=e=>l.fromStation=e),style:{width:"150px"},"show-arrow":!1,"show-search":!0,options:r.stationList.map((e=>({label:e.name,value:e.code})))},null,8,["value","options"])])),_:1})])),_:1}),(0,n.Wm)((0,s.SU)(he.Z),{span:2,style:{display:"flex"}},{default:(0,n.w5)((()=>[(0,n._)("div",Ge,[(0,n.Wm)((0,s.SU)(Pe.Z),{onClick:C,style:{cursor:"pointer",fontSize:"20px",color:"#1990ff"}})])])),_:1}),(0,n.Wm)((0,s.SU)(he.Z),{span:5},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(w.Z),{label:"目的地"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(y.ZP),{value:l.toStation,"onUpdate:value":t[1]||(t[1]=e=>l.toStation=e),style:{width:"150px"},"show-arrow":!1,"show-search":!0,options:r.stationList.map((e=>({label:e.name,value:e.code})))},null,8,["value","options"])])),_:1})])),_:1}),(0,n.Wm)((0,s.SU)(he.Z),{span:5},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(w.Z),{label:"出发日"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(be["default"]),{value:l.departureDate,"onUpdate:value":t[2]||(t[2]=e=>l.departureDate=e),style:{width:"150px"},"show-arrow":!1,"allow-clear":!1},null,8,["value"])])),_:1})])),_:1}),(0,n.Wm)((0,s.SU)(he.Z),{span:"2"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(w.Z),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(_.Z),{type:"primary",onClick:t[3]||(t[3]=()=>{W()})},{default:(0,n.w5)((()=>[(0,n.Uk)("查询")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,n._)("div",Ve,[((0,n.wg)(),(0,n.j4)((0,s.SU)(ke.Z),{type:"card","default-active-key":l.departureDate.format("MM-DD"),key:l.departureDate.format("MM-DD"),onChange:t[12]||(t[12]=e=>{const t=(0,s.SU)(qe())().format("YYYY"),a=t+e;l.departureDate=(0,s.SU)(qe())(a)})},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,s.SU)(Z),(e=>((0,n.wg)(),(0,n.j4)((0,s.SU)(Ze.Z),{key:e.format("MM-DD"),tab:j(e)},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(ge.ZP),{flex:"",bordered:!1},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Ue.Z),{justify:"space"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(he.Z),{span:20,flex:""},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(w.Z),null,{label:(0,n.w5)((()=>[Je])),default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(xe.Z),{value:l.car_type,onChange:t[5]||(t[5]=e=>{c.value=e.length===r.trainBrandListSelect.length,l.car_type=e})},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(We.Z),{checked:c.value,onChange:t[4]||(t[4]=e=>{c.value=e,l.car_type=e?r.trainBrandListSelect:[]}),style:{border:"1px solid #f0f0f0",marginRight:"10px"}},{default:(0,n.w5)((()=>[(0,n.Uk)("全部")])),_:1},8,["checked"]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.trainBrandListSelect,(e=>((0,n.wg)(),(0,n.j4)((0,s.SU)(je.ZP),{value:(0,s.SU)(Ae).find((t=>t.code===e))?.code},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)((0,s.SU)(Ae).find((t=>t.code===e))?.label),1)])),_:2},1032,["value"])))),256))])),_:2},1032,["value"])])),_:2},1024),(0,n.Wm)((0,s.SU)(w.Z),null,{label:(0,n.w5)((()=>[Qe])),default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(xe.Z),{value:l.departure,onChange:t[7]||(t[7]=e=>{v.value=e.length===o.value.length,l.departure=e})},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(We.Z),{style:{border:"1px solid #f0f0f0",marginRight:"10px"},checked:v.value,onChange:t[6]||(t[6]=e=>{v.value=e,l.departure=e?o.value:[]})},{default:(0,n.w5)((()=>[(0,n.Uk)("全部")])),_:1},8,["checked"]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.value,(e=>((0,n.wg)(),(0,n.j4)((0,s.SU)(je.ZP),{value:e},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e),1)])),_:2},1032,["value"])))),256))])),_:2},1032,["value"])])),_:2},1024),(0,n.Wm)((0,s.SU)(w.Z),null,{label:(0,n.w5)((()=>[Xe])),default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(xe.Z),{value:l.arrival,onChange:t[9]||(t[9]=e=>{f.value=e.length===u.value.length,l.arrival=e})},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(We.Z),{checked:f.value,style:{border:"1px solid #f0f0f0",marginRight:"10px"},onChange:t[8]||(t[8]=e=>{f.value=e,l.arrival=e?u.value:[]})},{default:(0,n.w5)((()=>[(0,n.Uk)("全部")])),_:1},8,["checked"]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(u.value,(e=>((0,n.wg)(),(0,n.j4)((0,s.SU)(je.ZP),{value:e},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e),1)])),_:2},1032,["value"])))),256))])),_:2},1032,["value"])])),_:2},1024),(0,n.Wm)((0,s.SU)(w.Z),null,{label:(0,n.w5)((()=>[et])),default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(xe.Z),{style:{minWidth:"300px",textWrap:"nowrap"},value:l.seat,onChange:t[11]||(t[11]=e=>{S.value=e.length===r.seatClassTypeListSelect.length,l.seat=e})},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(We.Z),{checked:S.value,onChange:t[10]||(t[10]=e=>{S.value=e,l.seat=e?r.seatClassTypeListSelect:[]}),style:{border:"1px solid #f0f0f0",marginRight:"10px"}},{default:(0,n.w5)((()=>[(0,n.Uk)("全部")])),_:1},8,["checked"]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.seatClassTypeListSelect,(e=>((0,n.wg)(),(0,n.j4)((0,s.SU)(je.ZP),{value:(0,s.SU)(Ke).find((t=>t.code===e))?.code},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)((0,s.SU)(Ke).find((t=>t.code===e))?.label),1)])),_:2},1032,["value"])))),256))])),_:2},1032,["value"])])),_:2},1024)])),_:2},1024),(0,n.Wm)((0,s.SU)(he.Z),{span:4,style:{"{\r\n                          text-align":"'end'"}},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(w.Z),{label:"发车时间"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(y.ZP),{dropdownClassName:"custom-select","default-value":0,options:a.map((e=>({label:e.label,value:e.value})))},null,8,["options"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["tab"])))),128))])),_:1},8,["default-active-key"]))])])),_:1})])),_:1}),(0,n.Wm)((0,s.SU)(Ue.Z),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(he.Z),{span:12},{default:(0,n.w5)((()=>[(0,n._)("span",tt,(0,i.zw)(r.stationList.find((e=>e.code===l.fromStation))?.name),1),(0,n.Wm)((0,s.SU)(Ie.Z)),(0,n._)("span",at,(0,i.zw)(r.stationList.find((e=>e.code===l.toStation))?.name),1),(0,n.Uk)(" （"),(0,n._)("span",lt,(0,i.zw)(l.departureDate.format("MM月DD日")),1),(0,n._)("span",nt,(0,i.zw)((0,s.SU)(Le)(l.departureDate.day())),1),(0,n.Uk)("） 共计"),(0,n._)("span",st,(0,i.zw)(r.trainList?.length),1),(0,n.Uk)("个车次 ")])),_:1})])),_:1}),(0,n._)("div",it,[(0,n.Wm)((0,s.SU)(ze.ZP),{columns:g,"data-source":r.trainList,pagination:!1},{expandedRowRender:(0,n.w5)((({record:t})=>[(0,n.Wm)((0,s.SU)(ze.ZP),{"show-header":!1,pagination:!1,columns:U,"data-source":[t]},{highSpeedTrainPrice:(0,n.w5)((({text:e})=>[(0,n._)("div",rt,(0,i.zw)(T(e?.find((e=>0===e?.type))?.price??e.find((e=>12===e?.type))?.price)),1)])),firstSeatPrice:(0,n.w5)((({text:e})=>[(0,n._)("div",dt,(0,i.zw)(T(e?.find((e=>1===e?.type))?.price)),1)])),secondSeatPrice:(0,n.w5)((({text:e})=>[(0,n._)("div",ot,(0,i.zw)(T(e?.find((e=>2===e?.type))?.price??e?.find((e=>3===e.type))?.price)),1)])),bedPrice:(0,n.w5)((({text:e})=>[(0,n._)("div",ut,(0,i.zw)(T(e?.find((e=>10===e?.type))?.price)),1)])),deluxSoftBedPrice:(0,n.w5)((({text:e})=>[(0,n._)("div",ct,(0,i.zw)(T(e?.find((e=>9===e?.type))?.price)),1)])),firstBed:(0,n.w5)((({text:e})=>[(0,n._)("div",pt,(0,i.zw)(T(e?.find((e=>6===e?.type))?.price??e?.find((e=>4===e?.type))?.price)),1)])),scondHardBedPrice:(0,n.w5)((({text:e})=>[(0,n._)("div",mt,(0,i.zw)(T(e?.find((e=>7===e?.type))?.price??e?.find((e=>5===e?.type))?.price)),1)])),firstSoftSeat:(0,n.w5)((({text:t})=>[(0,n._)("div",wt,(0,i.zw)(T(e.item?.find((e=>11===e?.type))?.price)),1)])),hardSeat:(0,n.w5)((({text:e})=>[(0,n._)("div",vt,(0,i.zw)(T(e?.find((e=>8===e?.type))?.price)),1)])),noSeat:(0,n.w5)((({text:e})=>[(0,n._)("div",ft,(0,i.zw)(T(e?.find((e=>13===e?.type))?.price)),1)])),other:(0,n.w5)((({text:e})=>[(0,n._)("div",_t,(0,i.zw)(T(e?.find((e=>14===e?.type))?.price)),1)])),_:2},1032,["data-source"])])),trainNumber:(0,n.w5)((({text:e,record:t})=>[(0,n._)("h1",{class:"card-name",style:{cursor:"pointer"},onClick:()=>{r.loading=!0,P(t.trainId)}},[(0,n.Wm)((0,s.SU)(Te.Z),{"get-popup-container":e=>e.parentNode,placement:"rightTop",trigger:"click"},{title:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(ze.ZP),{columns:h,"data-source":r.trainStationList,pagination:!1,loading:r.loading},null,8,["data-source","loading"])])),default:(0,n.w5)((()=>[(0,n._)("div",null,(0,i.zw)(e),1),(0,n._)("div",St,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t?.trainTags,(e=>((0,n.wg)(),(0,n.iD)("div",{style:(0,i.j5)({color:(0,s.SU)(He).find((t=>t.value===e))?.color,border:`1px solid ${(0,s.SU)(He).find((t=>t.value===e))?.color}`,padding:"2px",aspectRatio:"1 / 1",borderRadius:"2px",marginRight:"4px"})},(0,i.zw)((0,s.SU)(He).find((t=>t.value===e))?.label),5)))),256))])])),_:2},1032,["get-popup-container"])],8,yt)])),station:(0,n.w5)((({_:e,record:t})=>[(0,n._)("div",null,[(0,n._)("span",{style:(0,i.j5)({display:"inline-block",padding:"2px 4px",backgroundColor:t.departureFlag?"#cca567":"#7597d5",color:"#fff",borderRadius:"4px",fontSize:"10px",fontWeight:"bolder",marginRight:"2px"})},(0,i.zw)(t.departureFlag?"始":"过"),5),(0,n.Uk)((0,i.zw)(t.departure),1)]),(0,n._)("div",null,[(0,n._)("span",{style:(0,i.j5)({display:"inline-block",padding:"2px 4px",backgroundColor:t.arrivalFlag?"#6da77f":"#7597d5",color:"#fff",borderRadius:"4px",fontSize:"10px",fontWeight:"bolder",marginRight:"2px"})},(0,i.zw)(t.arrivalFlag?"终":"过"),5),(0,n.Uk)((0,i.zw)(t.arrival),1)])])),customStaionTitle:(0,n.w5)((()=>[gt,Ut])),time:(0,n.w5)((({_:e,record:t})=>[(0,n._)("div",null,(0,i.zw)(t.departureTime),1),(0,n._)("div",null,(0,i.zw)(t.arrivalTime),1)])),highSpeedTrain:(0,n.w5)((({text:e})=>[(0,n._)("div",{style:(0,i.j5)({color:(0,s.SU)(Re)(e?.find((e=>0===e?.type))?.quantity??e?.find((e=>12===e?.type))?.quantity)?.color})},(0,i.zw)((0,s.SU)(Re)(e?.find((e=>0===e?.type))?.quantity)?.label??(0,s.SU)(Re)(e?.find((e=>12===e?.type))?.quantity)?.label??"--"),5)])),firstSeat:(0,n.w5)((({text:e})=>[(0,n._)("div",{style:(0,i.j5)({color:(0,s.SU)(Re)(e?.find((e=>1===e?.type))?.quantity)?.color})},(0,i.zw)((0,s.SU)(Re)(e?.find((e=>1===e?.type))?.quantity)?.label??"--"),5)])),secondSeat:(0,n.w5)((({text:e})=>[(0,n._)("div",{style:(0,i.j5)({color:(0,s.SU)(Re)(e?.find((e=>2===e?.type))?.quantity??e?.find((e=>3===e?.type))?.quantity)?.color})},(0,i.zw)((0,s.SU)(Re)(e?.find((e=>2===e?.type))?.quantity)?.label??(0,s.SU)(Re)(e?.find((e=>3===e?.type))?.quantity)?.label??"--"),5)])),bed:(0,n.w5)((({text:e})=>[(0,n._)("div",{style:(0,i.j5)({color:(0,s.SU)(Re)(e?.find((e=>10===e?.type))?.quantity)?.color})},(0,i.zw)((0,s.SU)(Re)(e?.find((e=>10===e?.type))?.quantity)?.label??"--"),5)])),deluxSoftBed:(0,n.w5)((({text:e})=>[(0,n._)("div",null,(0,i.zw)(e?.find((e=>9===e?.type))?.quantity??"--"),1)])),firstBed:(0,n.w5)((({text:e})=>[(0,n._)("div",{style:(0,i.j5)({color:(0,s.SU)(Re)(e?.find((e=>6===e?.type))?.quantity??e?.find((e=>4===e?.type))?.quantity)?.color})},(0,i.zw)((0,s.SU)(Re)(e?.find((e=>6===e?.type))?.quantity)?.label??(0,s.SU)(Re)(e?.find((e=>4===e?.type))?.quantity)?.label??"--"),5)])),scondHardBed:(0,n.w5)((({text:e})=>[(0,n._)("div",{style:(0,i.j5)({color:(0,s.SU)(Re)(e?.find((e=>7===e?.type))?.quantity??e?.find((e=>5===e?.type))?.quantity)?.color})},(0,i.zw)((0,s.SU)(Re)(e?.find((e=>7===e?.type))?.quantity)?.label??(0,s.SU)(Re)(e?.find((e=>5===e?.type))?.quantity)?.label??"--"),5)])),firstSoftSeat:(0,n.w5)((({text:e})=>[(0,n._)("div",{style:(0,i.j5)({color:(0,s.SU)(Re)(e?.find((e=>11===e?.type))?.quantity)?.color})},(0,i.zw)((0,s.SU)(Re)(e?.find((e=>11===e?.type))?.quantity)?.label??"--"),5)])),hardSeat:(0,n.w5)((({text:e})=>[(0,n._)("div",{style:(0,i.j5)({color:(0,s.SU)(Re)(e?.find((e=>8===e?.type))?.quantity)?.color})},(0,i.zw)((0,s.SU)(Re)(e?.find((e=>8===e?.type))?.quantity)?.label??"--"),5)])),noSeat:(0,n.w5)((({text:e})=>[(0,n._)("div",{style:(0,i.j5)({color:(0,s.SU)(Re)(e?.find((e=>13===e?.type))?.quantity)?.color})},(0,i.zw)((0,s.SU)(Re)(e?.find((e=>13===e?.type))?.quantity)?.label??"--"),5)])),other:(0,n.w5)((({text:e})=>[(0,n._)("div",{style:(0,i.j5)({color:(0,s.SU)(Re)(e?.find((e=>14===e?.type))?.quantity)?.color})},(0,i.zw)((0,s.SU)(Re)(e?.find((e=>14===e?.type))?.quantity)?.label??"--"),5)])),customTimeTitle:(0,n.w5)((()=>[ht,bt])),customSecondSeatTitle:(0,n.w5)((()=>[kt,Zt])),customSeatTitle:(0,n.w5)((()=>[xt,Wt])),customScondHardSeadTitle:(0,n.w5)((()=>[jt,zt])),customFirstBedSeatTitle:(0,n.w5)((()=>[Tt,Ct])),operation:(0,n.w5)((({text:e,record:t})=>[(0,n.Wm)((0,s.SU)(_.Z),{type:"link",size:"small",onClick:()=>{I(t)},disabled:!t.seatClassList.filter((e=>e.quantity))?.length},{default:(0,n.w5)((()=>[(0,n.Uk)("预定")])),_:2},1032,["onClick","disabled"])])),default:(0,n.w5)((()=>[(0,n.Uk)(" > ")])),_:1},8,["data-source"])]),(0,n.Wm)((0,s.SU)(Ce.Z),{type:"warning"},{description:(0,n.w5)((()=>[Pt,It])),_:1})])),_:1})]))}};const qt=(0,fe.Z)(Dt,[["__scopeId","data-v-3d1b320c"]]);var Lt=qt,Rt=a(60693),Ot=a(16987);const Nt=e=>((0,n.dD)("data-v-211a15bd"),e=e(),(0,n.Cn)(),e),Ht={class:"title-wrapper"},Mt={key:0},Yt={class:"info-value"},Kt={key:1},At={class:"title-wrapper"},$t={key:2},Bt=Nt((()=>(0,n._)("label",{class:"info-label info-require"},"优惠(待)类",-1))),Et={class:"info-value"},Ft={key:3};var Gt={__name:"index",setup(e){const t=m.ZP.useForm,a=(0,s.qj)({contactEditType:"view",otherEditType:"view",userInfoMap:[{label:"用户名",value:"--",key:"username"},{label:"姓名",value:"--",key:"realName"},{label:"国家/地区",value:"--",key:"region",render:e=>Be.find((t=>t.value===e))?.label},{label:"证件类型",value:"--",key:"idType",render:e=>0===e?"身份证":"未知"},{label:"证件号码",value:"--",key:"idCard"},{label:"核验状态",value:"--",unRequire:!0,color:"#fe9a5e",key:"verifyStatus",render:e=>Ee.find((t=>t.value===e))?.label??"--"}],editUserInfoMap:[{label:"手机号",value:void 0,name:"phone",require:!0},{label:"邮箱",value:void 0,name:"mail"},{label:"地址",value:void 0,name:"address"},{label:"邮编",value:void 0,name:"postCode"}],userType:void 0}),l=U.Z.get("username"),{validate:r}=t(a.editUserInfoMap,(0,s.qj)({phone:[{required:!0,message:"请输入手机号"}]}));(0,n.bv)((()=>{L({username:l}).then((e=>{const{userInfoMap:t,editUserInfoMap:l}=a;e.success&&(a.userInfoMap=t.map((t=>({...t,value:e.data[t.key]}))),a.editUserInfoMap=l.map((t=>({...t,value:e.data[t.name]??""}))),a.userType=e.data?.userType)}))}));const d=()=>{a.contactEditType="view"===a.contactEditType?"edit":"view"},o=()=>{a.otherEditType="view"===a.otherEditType?"edit":"view"},u=()=>{H({username:l,mail:a.editUserInfoMap.find((e=>"mail"===e.name))?.value,postCode:a.editUserInfoMap.find((e=>"postCode"===e.name))?.value,address:a.editUserInfoMap.find((e=>"address"===e.name))?.value}).then((e=>{e.success?(a.contactEditType="view",p.ZP.success("修改信息成功")):p.ZP.error("修改失败")})).catch((e=>{a.contactEditType="view",console.log("err:::",e)}))},c=()=>{H({username:l,userType:a.userType}).then((e=>{e.success?(a.otherEditType="view",p.ZP.success("修改信息成功")):p.ZP.error("修改失败")})).catch((e=>{a.otherEditType="view",console.log("err:::",e)}))};return(e,t)=>((0,n.wg)(),(0,n.j4)((0,s.SU)(ge.ZP),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Rt.Z),{level:5},{default:(0,n.w5)((()=>[(0,n.Uk)("基本信息")])),_:1}),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.userInfoMap,(e=>((0,n.wg)(),(0,n.j4)((0,s.SU)(Ue.Z),{class:"info-wrapper"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(he.Z),{span:8,style:{textAlign:"end"}},{default:(0,n.w5)((()=>[(0,n._)("label",{class:(0,i.C_)(["info-label",!e.unRequire&&"info-require"])},(0,i.zw)(e.label)+"：",3)])),_:2},1024),(0,n.Wm)((0,s.SU)(he.Z),{span:"4",style:{textAlign:"start"}},{default:(0,n.w5)((()=>[(0,n._)("span",{class:"info-value",style:(0,i.j5)({color:e.color})},(0,i.zw)(e?.render?e.render(e.value):e.value??"--"),5)])),_:2},1024)])),_:2},1024)))),256)),(0,n.Wm)((0,s.SU)(Ot.Z),{dashed:""}),(0,n._)("div",Ht,[(0,n.Wm)((0,s.SU)(Rt.Z),{level:5},{default:(0,n.w5)((()=>[(0,n.Uk)("联系方式")])),_:1}),"view"===a.contactEditType?((0,n.wg)(),(0,n.j4)((0,s.SU)(_.Z),{key:0,onClick:d},{default:(0,n.w5)((()=>[(0,n.Uk)("编辑")])),_:1})):((0,n.wg)(),(0,n.j4)((0,s.SU)(_.Z),{key:1,onClick:u},{default:(0,n.w5)((()=>[(0,n.Uk)("保存")])),_:1}))]),"view"===a.contactEditType?((0,n.wg)(),(0,n.iD)("div",Mt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.editUserInfoMap,(e=>((0,n.wg)(),(0,n.j4)((0,s.SU)(Ue.Z),{class:"info-wrapper"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(he.Z),{span:8,style:{textAlign:"end"}},{default:(0,n.w5)((()=>[(0,n._)("label",{class:(0,i.C_)(["info-label",e.require&&"info-require"])},(0,i.zw)(e.label)+"：",3)])),_:2},1024),(0,n.Wm)((0,s.SU)(he.Z),{span:4,style:{textAlign:"start"}},{default:(0,n.w5)((()=>[(0,n._)("span",Yt,(0,i.zw)(e.value),1)])),_:2},1024)])),_:2},1024)))),256))])):((0,n.wg)(),(0,n.iD)("div",Kt,[(0,n.Wm)((0,s.SU)(m.ZP),{"label-col":{span:8},"wrapper-col":{span:4}},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.editUserInfoMap,(e=>((0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)((0,s.SU)(w.Z),{label:e.label,required:e.require},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(v.ZP),{value:e.value,"onUpdate:value":t=>e.value=t,disabled:"phone"===e.name},null,8,["value","onUpdate:value","disabled"])])),_:2},1032,["label","required"])])))),256))])),_:1})])),(0,n.Wm)((0,s.SU)(Ot.Z),{dashed:""}),(0,n._)("div",At,[(0,n.Wm)((0,s.SU)(Rt.Z),{level:5},{default:(0,n.w5)((()=>[(0,n.Uk)("附加信息")])),_:1}),"view"===a.otherEditType?((0,n.wg)(),(0,n.j4)((0,s.SU)(_.Z),{key:0,onClick:o},{default:(0,n.w5)((()=>[(0,n.Uk)("编辑")])),_:1})):((0,n.wg)(),(0,n.j4)((0,s.SU)(_.Z),{key:1,onClick:c},{default:(0,n.w5)((()=>[(0,n.Uk)("保存")])),_:1}))]),"view"===a.otherEditType?((0,n.wg)(),(0,n.iD)("div",$t,[(0,n.Wm)((0,s.SU)(Ue.Z),{class:"info-wrapper"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(he.Z),{span:8,style:{textAlign:"end"}},{default:(0,n.w5)((()=>[Bt])),_:1}),(0,n.Wm)((0,s.SU)(he.Z),{span:4,style:{textAlign:"start"}},{default:(0,n.w5)((()=>[(0,n._)("span",Et,(0,i.zw)((0,s.SU)(Ne).find((e=>e.value===a.userType))?.label),1)])),_:1})])),_:1})])):((0,n.wg)(),(0,n.iD)("div",Ft,[(0,n.Wm)((0,s.SU)(m.ZP),{"label-col":{span:8},"wrapper-col":{span:4}},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(w.Z),{label:"优惠(待)类",required:""},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(y.ZP),{value:a.userType,"onUpdate:value":t[0]||(t[0]=e=>a.userType=e)},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,s.SU)(Ne),(e=>((0,n.wg)(),(0,n.j4)((0,s.SU)(y.$m),{value:e.value},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["value"])])),_:1})])),_:1})]))])),_:1}))}};const Vt=(0,fe.Z)(Gt,[["__scopeId","data-v-211a15bd"]]);var Jt=Vt,Qt=a(44218),Xt=a(87202),ea=a(46981);const ta=["onClick"],aa=["onClick"];var la={__name:"index",setup(e){const t=U.Z.get("username"),a=(0,s.iH)([]),l=(0,s.iH)(!1),r=(0,s.qj)({selectedRowKeys:[],searchName:""});(0,n.bv)((()=>{d()}));const d=()=>{l.value=!0,W({username:t}).then((e=>{if(l.value=!1,!e.success)return p.ZP.error(e.message);a.value=e.data.map((e=>({...e,key:e.id})))??[]})).catch((e=>{l.value=!1,console.log(e)}))},u=e=>{j({id:e,username:t}).then((e=>{if(!e.success)return p.ZP.error(e.message);d()}))},c=(0,o.tv)(),m=[{title:"序号",dataIndex:"id"},{title:"姓名",dataIndex:"realName"},{title:"证件类型",dataIndex:"idType",slots:{customRender:"idType"}},{title:"证件号码",dataIndex:"idCard"},{title:"手机电话",dataIndex:"phone"},{title:"操作",dataIndex:"edit",slots:{customRender:"edit"}}],w=e=>{r.selectedRowKeys=e},f=()=>{r.selectedRowKeys.map((e=>{u(e)}))},y=()=>{r.searchName?a.value=a.value.filter((e=>-1!==e.realName.indexOf(r.searchName)))??[]:d()};return(e,t)=>((0,n.wg)(),(0,n.j4)((0,s.SU)(ge.ZP),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Se.Z),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(v.ZP),{value:r.searchName,"onUpdate:value":t[0]||(t[0]=e=>r.searchName=e),placeholder:"请输入乘客姓名","allow-clear":""},null,8,["value"]),(0,n.Wm)((0,s.SU)(_.Z),{onClick:y},{default:(0,n.w5)((()=>[(0,n.Uk)("查询")])),_:1}),(0,n.Wm)((0,s.SU)(_.Z),{type:"primary",onClick:t[1]||(t[1]=e=>(0,s.SU)(c).push("/addPassenger?type=create"))},{icon:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Qt.Z))])),default:(0,n.w5)((()=>[(0,n.Uk)(" 添加 ")])),_:1}),(0,n.Wm)((0,s.SU)(_.Z),{danger:"",disabled:!r.selectedRowKeys.length,onClick:f},{icon:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Xt.Z))])),default:(0,n.w5)((()=>[(0,n.Uk)(" 批量删除")])),_:1},8,["disabled"])])),_:1}),(0,n.Wm)((0,s.SU)(ze.ZP),{loading:l.value,"row-selection":{selectedRowKeys:r.selectedRowKeys,onChange:w},style:{marginTop:"20px"},columns:m,"data-source":a.value,pagination:!1},{idType:(0,n.w5)((({text:e})=>[(0,n._)("span",null,(0,i.zw)(0===e?"中国居民身份证":"其他"),1)])),edit:(0,n.w5)((({text:e,record:t})=>[(0,n._)("span",{onClick:()=>u(t.id),style:{marginRight:"20px",color:"red",cursor:"pointer"}},[(0,n.Wm)((0,s.SU)(Xt.Z))],8,ta),(0,n._)("span",{onClick:()=>(0,s.SU)(c).push(`/addPassenger?type=edit&id=${t.id}`),style:{cursor:"pointer"}},[(0,n.Wm)((0,s.SU)(ea.Z))],8,aa)])),_:1},8,["loading","row-selection","data-source"])])),_:1}))}};const na=la;var sa=na,ia={__name:"index",setup(e){return(e,t)=>((0,n.wg)(),(0,n.j4)((0,s.SU)(ge.ZP),null,{default:(0,n.w5)((()=>[(0,n.Uk)(" 席位已锁定，请在提示时间内完成支付时间，完成网上购票。支付剩余时间 ")])),_:1}))}};const ra=ia;var da=ra,oa=a(47297);const ua=e=>((0,n.dD)("data-v-7326cdbd"),e=e(),(0,n.Cn)(),e),ca=["innerHTML"],pa={class:"tip-wrapper"},ma=ua((()=>(0,n._)("span",{class:"i-lock"},null,-1))),wa={class:"time"},va={class:"important-text"},fa={class:"important-text"},_a={class:"important-text"},ya=ua((()=>(0,n._)("span",{class:"small-text"},"次",-1))),Sa={class:"important-text"},ga=ua((()=>(0,n._)("span",{class:"small-text"},"站",-1))),Ua={class:"important-text"},ha={class:"important-text"},ba=ua((()=>(0,n._)("span",{class:"small-text"},"站",-1))),ka={class:"important-text"},Za={style:{width:"100%",textAlign:"end",padding:"10px"}},xa={style:{color:"#ff8001"}},Wa={style:{width:"100%",display:"flex",justifyContent:"center"}},ja=ua((()=>(0,n._)("div",null,[(0,n._)("div",{class:"tips-txt"},[(0,n._)("h2",null,"温馨提示："),(0,n._)("p",null," 1. 一张有效身份证件同一乘车日期同一车次只能购买一张车票，高铁动卧列车除外。 "),(0,n._)("p",null," 2. 购买儿童票时，乘车儿童有有效身份证件的，请填写本人有效身份证件信息。自2023年1月1日起，每一名持票成年人旅客可免费携带一名未满6周岁且不单独占用席位的儿童乘车，超过一名时，超过人数应购买儿童优惠票。免费儿童可以在购票成功后添加。 "),(0,n._)("p",null,' 3. 购买残疾军人（伤残警察）优待票的，须在购票后、开车前办理换票手续方可进站乘车。换票时，不符合规定的减价优待条件，没有有效"中华人民共和国残疾军人证"或"中华人民共和国伤残人民警察证"的，不予换票，所购车票按规定办理退票手续。 '),(0,n._)("p",null," 4.一天内3次申请车票成功后取消订单（包含无座票时取消5次计为取消1次），当日将不能在12306继续购票。 "),(0,n._)("p",null,[(0,n._)("strong",null,[(0,n.Uk)("5.购买铁路乘意险的注册用户年龄须在18周岁以上，使用非中国居民身份证注册的用户如购买铁路乘意险，须在"),(0,n._)("a",{href:"../view/information.html",shape:"rect"},"我的12306——个人信息"),(0,n.Uk)(" 如实填写“出生日期”。")])]),(0,n._)("p",null,[(0,n._)("strong",null,[(0,n.Uk)("6.父母为未成年子女投保，须在"),(0,n._)("a",{href:"../view/passengers.html",shape:"rect"},"我的乘车人"),(0,n.Uk)(" 登记未成年子女的有效身份证件信息。")])]),(0,n._)("p",null,"7.未尽事宜详见《铁路旅客运输规程》等有关规定和车站公告。"),(0,n._)("p",{name:"xjky",style:{display:"none"}},[(0,n.Uk)(" 8. 为确保乘客在旅途中有一个安全、舒适的乘坐环境，自2020年11月17日起，"),(0,n._)("span",{style:{color:"red"}},"旅客不得随身携带长宽高之和大于130厘米的雪具乘车"),(0,n.Uk)(" 。您可选择雪具快运服务，请提前1-2天选择雪具快运“门到站”或“站到站”服务，中铁快运提供雪具到站后3日免费保管，请您根据出行时间，提前咨询和办理。中铁快运客服热线：95572"),(0,n._)("br",{clear:"none"})])])],-1))),za={style:{fontSize:"20px",color:" #dc2408",fontWeight:"bold"}},Ta={style:{overflow:"hidden"}},Ca={class:"bank3"},Pa=["onClick"],Ia=["src","alt"],Da=ua((()=>(0,n._)("div",{style:{fontSize:"12px"}}," 支付完成后，请不要关闭此支付验证窗口 ",-1))),qa=ua((()=>(0,n._)("div",{style:{fontSize:"12px"}}," 支付完成后请更具您支付的情况点击下面按钮。 ",-1)));var La={__name:"index",setup(e){let t;const{query:a}=(0,o.yj)(),l=(0,o.tv)(),r=(0,s.qj)({count:6e5,currentInfo:null,open:!1,html:"",loading:!1,isInitiatePayment:!1,isPaying:!1,isPayingOpen:!1}),d=[{title:"序号",dataIndex:"id",slots:{customRender:"id"}},{title:"姓名",dataIndex:"realName"},{title:"证件类型",dataIndex:"idType",slots:{customRender:"idType"}},{title:"证件号码",dataIndex:"idCard"},{title:"票种",dataIndex:"ticketType",slots:{customRender:"ticketType"}},{title:"席别",dataIndex:"seatType",slots:{customRender:"seatType"}},{title:"车厢",dataIndex:"carriageNumber"},{title:"席位号",dataIndex:"seatNumber"},{title:"票价(元)",dataIndex:"amount",slots:{customRender:"amount"}}];(0,n.bv)((()=>{t=setInterval((()=>{r.count-=1e3,w()}),1e3),qe().duration(r.count).minutes(),u()})),(0,n.Ah)((()=>{clearInterval(t)}));const u=()=>{I({orderSn:a?.sn}).then((e=>{e.success&&(r.currentInfo=e.data)}))};(0,n.YP)((()=>r.isPaying),(e=>{r.isPayingOpen=e}));const c=(0,n.Fl)((()=>{let e=0;return r.currentInfo?.passengerDetails?.map((t=>{e+=t?.amount??0})),e/100})),m=e=>{if(0!==e)return p.ZP.error("该支付方式暂未对接，请稍候...");r.isInitiatePayment=!0,r.open=!1,r.isPayingOpen=!0;const t={channel:0,tradeType:0,orderSn:a.sn,totalAmount:c.value,outOrderSn:a.orderSn,subject:`${r.currentInfo.departure}-${r.currentInfo.arrival}`};D(t).then((e=>{r.html=e.data?.body,r.loading=!0,setTimeout((()=>{r.loading=!1,window.open(`/aliPay?body=${encodeURIComponent(e.data?.body)}`)}),500)}))},w=()=>{r.isInitiatePayment&&M({orderSn:a?.sn}).then((e=>{r.isPaying=0===e.data.status,20===e.data.status&&l.push(`/paySuccess?orderSn=${e.data.orderSn}`)})).catch((e=>{console.log("error:::",e)}))};return(e,t)=>((0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",{innerHTML:r.html},null,8,ca),(0,n.Wm)((0,s.SU)(Se.Z),{style:{width:"100%"},direction:"vertical"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(ge.ZP),null,{default:(0,n.w5)((()=>[(0,n._)("div",pa,[ma,(0,n.Uk)(" 席位已锁定，请在提示时间内完成支付时间，完成网上购票。支付剩余时间： "),(0,n._)("span",wa,(0,i.zw)(`${(0,s.SU)(qe()).duration(r.count).minutes()}分${(0,s.SU)(qe()).duration(r.count).seconds()}秒`),1)])])),_:1}),(0,n.Wm)((0,s.SU)(ge.ZP),{title:"订单信息"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Se.Z),{style:{width:"100%"},direction:"vertical"},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n._)("span",va,(0,i.zw)(r.currentInfo?.ridingDate),1),(0,n._)("span",fa,"（"+(0,i.zw)((0,s.SU)(Le)((0,s.SU)(qe())(r.currentInfo?.ridingDate??new Date).day()))+"）",1),(0,n._)("span",_a,(0,i.zw)(r.currentInfo?.trainNumber),1),ya,(0,n._)("span",Sa,(0,i.zw)(r.currentInfo?.departure),1),ga,(0,n._)("span",Ua,"（"+(0,i.zw)(r.currentInfo?.departureTime)+"开）——",1),(0,n._)("span",ha,(0,i.zw)(r.currentInfo?.arrival),1),ba,(0,n._)("span",ka,"（"+(0,i.zw)(r.currentInfo?.arrivalTime)+"到）",1)]),(0,n.Wm)((0,s.SU)(ze.ZP),{columns:d,pagination:!1,dataSource:r.currentInfo?.passengerDetails},{id:(0,n.w5)((({text:e,record:t,index:a})=>[(0,n.Uk)((0,i.zw)(a+1),1)])),idType:(0,n.w5)((({text:e,record:t})=>[(0,n.Uk)((0,i.zw)((0,s.SU)(Ye).find((t=>t.value===e))?.label),1)])),ticketType:(0,n.w5)((({text:e,record:t})=>[(0,n.Uk)((0,i.zw)((0,s.SU)(Oe).find((t=>t.value===e))?.label),1)])),seatType:(0,n.w5)((({text:e,record:t})=>[(0,n.Uk)((0,i.zw)((0,s.SU)(Ke).find((t=>t.code===e))?.label),1)])),amount:(0,n.w5)((({text:e,record:t})=>[(0,n._)("span",{style:(0,i.j5)({color:"rgb(252, 131, 2)"})},"￥"+(0,i.zw)(e/100),5)])),_:1},8,["dataSource"]),(0,n._)("div",Za,[(0,n.Uk)(" 总票价："),(0,n._)("span",xa,"￥"+(0,i.zw)(c.value)+"元",1)]),(0,n.Wm)((0,s.SU)(Ot.Z)),(0,n._)("div",Wa,[(0,n.Wm)((0,s.SU)(Se.Z),{size:"large"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(_.Z),{onClick:t[0]||(t[0]=()=>{(0,s.SU)(N)({orderSn:(0,s.SU)(a)?.sn}).then((e=>{e.success?((0,s.SU)(p.ZP).success("订单取消成功"),(0,s.SU)(l).push("/ticketSearch")):(0,s.SU)(p.ZP).error(e.message)}))})},{default:(0,n.w5)((()=>[(0,n.Uk)("取消订单")])),_:1}),(0,n.Wm)((0,s.SU)(_.Z),{style:{backgroundColor:"#ff8001",color:"#fff",border:"none"},onClick:t[1]||(t[1]=e=>r.open=!0)},{default:(0,n.w5)((()=>[(0,n.Uk)("网上支付")])),_:1})])),_:1})])])),_:1})])),_:1}),ja])),_:1}),(0,n.Wm)((0,s.SU)(S.Z),{visible:r.open,title:"请付款",onCancel:t[2]||(t[2]=e=>r.open=!1),width:"40%",footer:null},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(oa.Z),{spinning:r.loading},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Uk)(" >>应付金额："),(0,n._)("span",za,(0,i.zw)(c.value),1),(0,n.Uk)(" 元 ")]),(0,n.Wm)((0,s.SU)(Ot.Z),{dashed:""}),(0,n._)("div",Ta,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,s.SU)($e),(e=>((0,n.wg)(),(0,n.iD)("div",Ca,[(0,n._)("div",{class:"bank3_5",onClick:()=>m(e.value)},[(0,n._)("img",{src:e.img,alt:e.name},null,8,Ia)],8,Pa)])))),256))])])),_:1},8,["spinning"])])),_:1},8,["visible"]),(0,n.Wm)((0,s.SU)(S.Z),{visible:r.isPayingOpen,title:"网上支付提示",footer:null,style:{top:"30%"}},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Ue.Z),{gutter:[24,6]},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(he.Z),{span:6,style:{display:"flex",textAlign:"end",alignItems:"center",justifyContent:"end"}},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(oa.Z),{size:"large",spinning:!0})])),_:1}),(0,n.Wm)((0,s.SU)(he.Z),{span:14},{default:(0,n.w5)((()=>[Da,qa])),_:1})])),_:1}),(0,n.Wm)((0,s.SU)(Se.Z),{style:{display:"flex",justifyContent:"center",marginTop:"20px"}},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(_.Z),{type:"default",onClick:t[3]||(t[3]=()=>(0,s.SU)(l).push("/ticketList"))},{default:(0,n.w5)((()=>[(0,n.Uk)("支付遇到问题")])),_:1}),(0,n.Wm)((0,s.SU)(_.Z),{type:"primary",onClick:t[4]||(t[4]=()=>(0,s.SU)(l).push("/ticketList"))},{default:(0,n.w5)((()=>[(0,n.Uk)("支付完成")])),_:1})])),_:1})])),_:1},8,["visible"])],64))}};const Ra=(0,fe.Z)(La,[["__scopeId","data-v-7326cdbd"]]);var Oa=Ra,Na={__name:"index",setup(e){const t=m.ZP.useForm,a=(0,o.tv)(),{query:l}=(0,o.yj)(),r=U.Z.get("username"),d="edit"===(0,o.yj)().query?.type;let u=(0,s.iH)({realName:"",idType:void 0,discountType:void 0,phone:"",idCard:""});const c=(0,s.iH)(!1),f=(0,s.qj)({username:[{required:!0,message:"请完善信息"}],realName:[{required:!0,message:"请完善信息"}],idType:[{required:!0,message:"请完善信息"}],discountType:[{required:!0,message:"请完善信息"}],phone:[{required:!0,message:"格式不正确，请完善",pattern:/^1(3|5|6|7|8)[0-9]{9}$/}]}),{resetFields:S,validate:g,validateInfos:h}=t(u,f);(0,n.bv)((()=>{"edit"===l.type&&W({username:r}).then((e=>{if(e.data?.length){const t=e.data.find((e=>e.id==l.id));u.value={...u.value,...t}}}))}));const b=()=>{console.log(l),g().then((()=>{c.value=!0;let e={username:r,...(0,s.IU)(u.value)};if("edit"===l.type){const{id:t,phone:n}=u.value;return e={id:t,phone:n,username:r},T(e).then((e=>{e.success&&(p.ZP.success(`乘车人${"edit"===l.type?"修改":"创建"}成功`),a.push("/passenger"))}))}z(e).then((e=>{c.value=!0,e.success&&(p.ZP.success(`乘车人${"edit"===l.type?"修改":"创建"}成功`),a.push("/passenger"))})).catch((e=>console.log(e)))})).catch((e=>console.log(e)))};return(e,t)=>((0,n.wg)(),(0,n.j4)((0,s.SU)(ge.ZP),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Ce.Z),{"show-icon":"",type:"warning",message:"如旅客身份信息未能在添加后的24小时内通过核验，请乘车人持有效身份证原件到车站办理身份核验。"}),(0,n.Wm)((0,s.SU)(ge.ZP),{bordered:!1},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(m.ZP),{"label-col":{span:10},"wrapper-col":{span:4}},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Rt.Z),{level:5},{default:(0,n.w5)((()=>[(0,n.Uk)("基本信息")])),_:1}),(0,n.Wm)((0,s.SU)(w.Z),(0,n.dG)({label:"证件类型"},(0,s.SU)(h).idType),{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(y.ZP),{disabled:d,value:(0,s.SU)(u).idType,"onUpdate:value":t[0]||(t[0]=e=>(0,s.SU)(u).idType=e)},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(y.$m),{value:0},{default:(0,n.w5)((()=>[(0,n.Uk)("身份证")])),_:1})])),_:1},8,["value"])])),_:1},16),(0,n.Wm)((0,s.SU)(w.Z),(0,n.dG)({label:"姓名"},(0,s.SU)(h).realName),{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(v.ZP),{disabled:d,value:(0,s.SU)(u).realName,"onUpdate:value":t[1]||(t[1]=e=>(0,s.SU)(u).realName=e)},null,8,["value"])])),_:1},16),(0,n.Wm)((0,s.SU)(w.Z),(0,n.dG)({label:"证件号码"},(0,s.SU)(h).idCard),{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(v.ZP),{disabled:d,value:(0,s.SU)(u).idCard,"onUpdate:value":t[2]||(t[2]=e=>(0,s.SU)(u).idCard=e)},null,8,["value"])])),_:1},16),(0,n.Wm)((0,s.SU)(Rt.Z),{level:5},{default:(0,n.w5)((()=>[(0,n.Uk)("联系方式")])),_:1}),(0,n.Wm)((0,s.SU)(w.Z),(0,n.dG)({label:"手机号"},(0,s.SU)(h).phone),{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(v.ZP),{value:(0,s.SU)(u).phone,"onUpdate:value":t[3]||(t[3]=e=>(0,s.SU)(u).phone=e)},null,8,["value"])])),_:1},16),(0,n.Wm)((0,s.SU)(Rt.Z),{level:5},{default:(0,n.w5)((()=>[(0,n.Uk)("附加信息")])),_:1}),(0,n.Wm)((0,s.SU)(w.Z),(0,n.dG)({label:"优惠(待)类型"},(0,s.SU)(h).discountType),{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(y.ZP),{disabled:d,value:(0,s.SU)(u).discountType,"onUpdate:value":t[4]||(t[4]=e=>(0,s.SU)(u).discountType=e)},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,s.SU)(Ne),(e=>((0,n.wg)(),(0,n.j4)((0,s.SU)(y.$m),{value:e.value},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.label),1)])),_:2},1032,["value"])))),256))])),_:1},8,["value"])])),_:1},16),(0,n.Wm)((0,s.SU)(Ue.Z),{align:"center"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Se.Z),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(_.Z),{onClick:t[5]||(t[5]=()=>(0,s.SU)(a).push("/passenger"))},{default:(0,n.w5)((()=>[(0,n.Uk)("取消")])),_:1}),(0,n.Wm)((0,s.SU)(_.Z),{loading:c.value,type:"primary",onClick:b},{default:(0,n.w5)((()=>[(0,n.Uk)("保存")])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}))}};const Ha=Na;var Ma=Ha;const Ya=e=>((0,n.dD)("data-v-423da6f6"),e=e(),(0,n.Cn)(),e),Ka=Ya((()=>(0,n._)("div",{class:"train-title"},[(0,n._)("div",null,"2023-06-18(周日)"),(0,n._)("div",null,"G103"),(0,n._)("div",null,"次"),(0,n._)("div",null,"北京南"),(0,n._)("div",null,"站"),(0,n._)("div",null,"(06:20开)"),(0,n._)("div",null,"—上海虹桥"),(0,n._)("div",null,"站"),(0,n._)("div",null,"(11:58到)")],-1))),Aa=Ya((()=>(0,n._)("div",null," *显示的卧铺票价均为上铺票价，供您参考，具体票价以您确认支付实际购买的铺别票价为准 ",-1)));var $a={__name:"index",setup(e){const t=[{dataIndex:"number",title:"序号"},{dataIndex:"ticket",title:"票种"},{dataIndex:"seat",title:"席别"},{dataIndex:"name",title:"姓名"},{dataIndex:"cardType",title:"证件类型"},{dataIndex:"cardNumber",title:"证件号码"},{dataIndex:"eidt",title:"操作"}],a=[{number:1,ticket:"成人票",seat:"二等座",name:"yika",cardType:"证件类型",cardNumber:"证件号码",eidt:"操作"},{number:1,ticket:"成人票",seat:"二等座",name:"yika",cardType:"证件类型",cardNumber:"证件号码",eidt:"操作"},{number:1,ticket:"成人票",seat:"二等座",name:"yika",cardType:"证件类型",cardNumber:"证件号码",eidt:"操作"}];return(e,l)=>{const i=(0,n.up)("dvi");return(0,n.wg)(),(0,n.j4)((0,s.SU)(Se.Z),{direction:"vertical",style:{width:"100%"}},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(ge.ZP),{title:"列表信息（以下余票信息仅供参考）"},{default:(0,n.w5)((()=>[Ka,(0,n.Wm)((0,s.SU)(Ot.Z),{dashed:""}),Aa])),_:1}),(0,n.Wm)((0,s.SU)(ge.ZP),{title:"乘客信息（填写说明）"},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)((0,s.SU)(Se.Z),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(A.Z)),(0,n.Uk)("乘车人")])),_:1})]),(0,n.Wm)(i,null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Se.Z),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(je.ZP),null,{default:(0,n.w5)((()=>[(0,n.Uk)("旺旺")])),_:1}),(0,n.Wm)((0,s.SU)(je.ZP),null,{default:(0,n.w5)((()=>[(0,n.Uk)("小伙")])),_:1})])),_:1})])),_:1}),(0,n.Wm)((0,s.SU)(Ot.Z),{dashed:""}),(0,n.Wm)((0,s.SU)(m.ZP)),(0,n.Wm)((0,s.SU)(ze.ZP),{columns:t,"data-source":a})])),_:1})])),_:1})}}};const Ba=(0,fe.Z)($a,[["__scopeId","data-v-423da6f6"]]);var Ea=Ba,Fa=a(60191),Ga=a(73811),Va={__name:"index",props:["type"],setup(e){const t=e,a=(0,Ga.Z)({scriptUrl:"//at.alicdn.com/t/c/font_4157208_f23qszocd1l.js"});return(e,l)=>((0,n.wg)(),(0,n.j4)((0,s.SU)(a),{type:t.type},null,8,["type"]))}};const Ja=Va;var Qa=Ja;const Xa=e=>((0,n.dD)("data-v-684551b0"),e=e(),(0,n.Cn)(),e),el={class:"buy-ticket-wrapper"},tl=Xa((()=>(0,n._)("div",{class:"title-wrapper"},[(0,n._)("h1",null,"列表信息"),(0,n._)("h2",null,"（以下余票信息仅供参考）")],-1))),al={class:"important-text"},ll={class:"important-text"},nl={class:"important-text"},sl=Xa((()=>(0,n._)("span",{class:"small-text"},"次",-1))),il={class:"important-text"},rl=Xa((()=>(0,n._)("span",{class:"small-text"},"站",-1))),dl={class:"important-text"},ol={class:"important-text"},ul=Xa((()=>(0,n._)("span",{class:"small-text"},"站",-1))),cl={class:"important-text"},pl={class:"seat-wrapper"},ml={class:"price"},wl=Xa((()=>(0,n._)("div",{class:"tip"}," *显示的卧铺票价均为上铺票价，供您参考，具体票价以您确认支付时实际购买的铺别票价为准。 ",-1))),vl=Xa((()=>(0,n._)("div",{class:"title-wrapper"},[(0,n._)("h1",null,"乘客信息"),(0,n._)("h2",null,"（填写说明）")],-1))),fl={class:"user-tip"},_l=Xa((()=>(0,n._)("span",null,"乘车人",-1))),yl={class:"check-wrapper"},Sl=Xa((()=>(0,n._)("img",{style:{width:"100%"},src:"https://kyfw.12306.cn/otn/resources/images/ins_ad7.png",alt:""},null,-1))),gl=Xa((()=>(0,n._)("div",null,[(0,n._)("span",null,"提交订单表示已阅读并同意"),(0,n._)("span",null,[(0,n._)("a",{href:""},"《国铁集团铁路旅客运输规程》"),(0,n._)("a",{href:""},"《服务条款》")])],-1))),Ul={style:{width:"100%",textAlign:"center"}},hl=Xa((()=>(0,n._)("div",{class:"tips-txt"},[(0,n._)("h2",null,"温馨提示："),(0,n._)("p",null," 1. 一张有效身份证件同一乘车日期同一车次只能购买一张车票，高铁动卧列车除外。 "),(0,n._)("p",null," 2. 购买儿童票时，乘车儿童有有效身份证件的，请填写本人有效身份证件信息。自2023年1月1日起，每一名持票成年人旅客可免费携带一名未满6周岁且不单独占用席位的儿童乘车，超过一名时，超过人数应购买儿童优惠票。免费儿童可以在购票成功后添加。 "),(0,n._)("p",null,' 3. 购买残疾军人（伤残警察）优待票的，须在购票后、开车前办理换票手续方可进站乘车。换票时，不符合规定的减价优待条件，没有有效"中华人民共和国残疾军人证"或"中华人民共和国伤残人民警察证"的，不予换票，所购车票按规定办理退票手续。 '),(0,n._)("p",null," 4.一天内3次申请车票成功后取消订单（包含无座票时取消5次计为取消1次），当日将不能在12306继续购票。 "),(0,n._)("p",null,[(0,n._)("strong",null,[(0,n.Uk)("5.购买铁路乘意险的注册用户年龄须在18周岁以上，使用非中国居民身份证注册的用户如购买铁路乘意险，须在"),(0,n._)("a",{href:"../view/information.html",shape:"rect"},"我的12306——个人信息"),(0,n.Uk)(" 如实填写“出生日期”。")])]),(0,n._)("p",null,[(0,n._)("strong",null,[(0,n.Uk)("6.父母为未成年子女投保，须在"),(0,n._)("a",{href:"../view/passengers.html",shape:"rect"},"我的乘车人"),(0,n.Uk)(" 登记未成年子女的有效身份证件信息。")])]),(0,n._)("p",null,"7.未尽事宜详见《铁路旅客运输规程》等有关规定和车站公告。"),(0,n._)("p",{name:"xjky",style:{display:"none"}},[(0,n.Uk)(" 8. 为确保乘客在旅途中有一个安全、舒适的乘坐环境，自2020年11月17日起，"),(0,n._)("span",{style:{color:"red"}},"旅客不得随身携带长宽高之和大于130厘米的雪具乘车"),(0,n.Uk)(" 。您可选择雪具快运服务，请提前1-2天选择雪具快运“门到站”或“站到站”服务，中铁快运提供雪具到站后3日免费保管，请您根据出行时间，提前咨询和办理。中铁快运客服热线：95572"),(0,n._)("br",{clear:"none"})])],-1))),bl={class:"important-text"},kl={class:"important-text"},Zl={class:"important-text"},xl=Xa((()=>(0,n._)("span",{class:"small-text"},"次",-1))),Wl={class:"important-text"},jl=Xa((()=>(0,n._)("span",{class:"small-text"},"站",-1))),zl={class:"important-text"},Tl={class:"important-text"},Cl=Xa((()=>(0,n._)("span",{class:"small-text"},"站",-1))),Pl={class:"important-text"},Il={key:0},Dl=Xa((()=>(0,n._)("a",{href:""},"*如果本次列车剩余席位无法满足您的选座需求，系统将自动为您分配席位",-1))),ql={class:"seat-choose-wrapper"},Ll={class:"tip"},Rl={class:"action-wrapper"},Ol=Xa((()=>(0,n._)("div",null,"窗",-1))),Nl=["onClick"],Hl=Xa((()=>(0,n._)("div",null,"过道",-1))),Ml=["onClick"],Yl=Xa((()=>(0,n._)("div",null,"窗",-1))),Kl={key:1},Al=Xa((()=>(0,n._)("a",{href:""},"*系统将随机为您申请席位，暂不支持自选席位",-1))),$l=[Al],Bl={class:"info-tip"};var El={__name:"index",setup(e){const t={width:"150px"},{query:a}=(0,o.yj)(),l=U.Z.get("username"),r=(0,s.qj)({currTrain:null,currPassengerList:[],dataSource:[],rawDataSource:[],currentSeat:[],open:!1,currentSeatCode:[],seatPosition:[],isChooseSeat:!0,seatLeft:3,seatNumber:5,loading:!1}),d=(0,s.iH)([]);(0,n.bv)((()=>{x({fromStation:a.fromStation,toStation:a.toStation,departureDate:a.departureDate}).then((e=>{if(e.success){const t=e.data.trainList.find((e=>e.trainNumber===a.trainNumber));r.currentSeat=t.seatClassList,r.currTrain=t}})),W({username:l}).then((e=>{e.success&&(r.currPassengerList=e.data??[],r.dataSource=e.data?.map(((e,t)=>({...e,keyNumber:t+1}))),r.rawDataSource=e.data?.map(((e,t)=>({...e,keyNumber:t+1}))))}))})),(0,n.YP)((()=>r.dataSource),(e=>{let t=e?.length&&e[0]?.seatType,a=["A","B","C","D","E"],l=3;t===Ke.find((e=>"商务座"===e.label))?.code&&(a=["A","C","F"],l=2),t===Ke.find((e=>"一等座"===e.label))?.code&&(a=["A","C","D","F"],l=2),t===Ke.find((e=>"二等座"===e.label))?.code&&(a=["A","B","C","D","F"],l=3),console.log("newValue.length:::",e?.length),console.log("seatPosition?.length :::",a?.length);let n=new Array((e?.length??1)*(a?.length??1)).fill("");n=n?.map(((e,t)=>t<a?.length-1?`${a[t]}0`:`${a[t%a.length]}${Math.floor(t/a?.length)}`)),r.seatPosition=n,r.seatLeft=l,r.seatNumber=a?.length}),{deep:!0}),(0,n.YP)([()=>d.value],(e=>{const t=e.map((e=>(0,s.IU)(e)))?.flat(),a=r.rawDataSource.filter((e=>t.includes(e.id)));r.dataSource=a})),(0,n.YP)((()=>r.dataSource),(e=>{let t=!0,a=e?.length&&e[0].seatType;e?.length&&e.map((e=>{e.seatType!==a&&(t=!1)})),r.isChooseSeat=t}),{deep:!0});const u=[{title:"序号",dataIndex:"keyNumber"},{title:"票种",dataIndex:"discountType",slots:{customRender:"ticketType"}},{title:"席别",dataIndex:"",slots:{customRender:"seatType"}},{title:"姓名",dataIndex:"realName",slots:{customRender:"realName"}},{title:"证件类型",dataIndex:"idType",slots:{customRender:"idType"}},{title:"证件号码",dataIndex:"idCard",slots:{customRender:"idCard"}},{title:"操作",dataIndex:"",slots:{customRender:"edit"}}],c=e=>{r.dataSource=(r.dataSource??[]).filter((t=>t.id!==e)),d.value=d.value.filter((t=>t!==e))},m=(e,t)=>{let a;r.dataSource.find(((t,l)=>{if(t.id===e)return a=l,!0})),r.dataSource[a]["seatType"]=t},w=(e,t)=>{let a;r.dataSource.find(((t,l)=>{if(t.id===e)return a=l,!0})),r.dataSource[a]["idType"]=t},f=()=>{const e=r.dataSource.some((e=>null===e.seatType||void 0===e.seatType));if(e||0===r.dataSource?.length)return p.ZP.error("请补全信息");r.open=!0},g=[{title:"序号",dataIndex:"keyNumber"},{title:"席别",dataIndex:"seatType",slots:{customRender:"seatType"}},{title:"票种",dataIndex:"discountType",slots:{customRender:"discountType"}},{title:"姓名",dataIndex:"realName"},{title:"证件类型",dataIndex:"idType",slots:{customRender:"idType"}},{title:"证件号码",dataIndex:"idCard"}],h=e=>{-1!==r.currentSeatCode?.indexOf(e)?r.currentSeatCode=r.currentSeatCode?.filter((t=>t!==e)):r.currentSeatCode.length===r.dataSource.length?r.currentSeatCode[r.currentSeatCode.length-1]=e:r.currentSeatCode.push(e)},b=()=>{let e={trainId:a?.trainId};const t=r.dataSource.map((e=>({passengerId:e.id,seatType:e.seatType})));e={...e,passengers:t,chooseSeats:(0,s.IU)(r.currentSeatCode),departure:r.currTrain?.departure,arrival:r.currTrain?.arrival},r.loading=!0,P(e).then((e=>{e.success?(p.ZP.success("下单成功，正在跳转至订单"),setTimeout((()=>{Ms.push(`/order?sn=${e.data.orderSn}`)}),500)):p.ZP.error(e.message),r.loading=!1})).catch((e=>{r.loading=!1,console.log(e)}))};return(e,l)=>((0,n.wg)(),(0,n.iD)("div",el,[(0,n.Wm)((0,s.SU)(Se.Z),{direction:"vertical",style:{width:"100%"},size:"large"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(ge.ZP),null,{title:(0,n.w5)((()=>[tl])),default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n._)("span",al,(0,i.zw)((0,s.SU)(a).departureDate),1),(0,n._)("span",ll,"（"+(0,i.zw)((0,s.SU)(Le)((0,s.SU)(qe())((0,s.SU)(a).departureDate).day()))+"）",1),(0,n._)("span",nl,(0,i.zw)((0,s.SU)(a).trainNumber),1),sl,(0,n._)("span",il,(0,i.zw)(r.currTrain?.departure),1),rl,(0,n._)("span",dl,"（"+(0,i.zw)(r.currTrain?.departureTime)+"开）——",1),(0,n._)("span",ol,(0,i.zw)(r.currTrain?.arrival),1),ul,(0,n._)("span",cl,"（"+(0,i.zw)(r.currTrain?.duration)+"到）",1)]),(0,n.Wm)((0,s.SU)(Ot.Z),{dashed:""}),(0,n._)("div",pl,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.currentSeat,(e=>((0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("span",null,(0,i.zw)((0,s.SU)(Ke).find((t=>t.code===e.type))?.label),1),(0,n.Uk)(" （ "),(0,n._)("span",ml,"￥"+(0,i.zw)(e?.price),1),(0,n.Uk)("） "),(0,n._)("span",null,(0,i.zw)(e.quantity>=1?"有票":"1张票"),1)])))),256))]),wl])),_:1}),(0,n.Wm)((0,s.SU)(ge.ZP),null,{title:(0,n.w5)((()=>[vl])),default:(0,n.w5)((()=>[(0,n._)("div",fl,[(0,n.Wm)((0,s.SU)(A.Z)),_l]),(0,n._)("div",yl,[r.currPassengerList?.length?((0,n.wg)(),(0,n.j4)((0,s.SU)(xe.Z),{key:0,value:d.value,"onUpdate:value":l[0]||(l[0]=e=>d.value=e)},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.currPassengerList,(e=>((0,n.wg)(),(0,n.j4)((0,s.SU)(je.ZP),{value:e.id},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.realName),1)])),_:2},1032,["value"])))),256))])),_:1},8,["value"])):((0,n.wg)(),(0,n.j4)((0,s.SU)(_.Z),{key:1,onClick:l[1]||(l[1]=e=>(0,s.SU)(Ms).push("/passenger")),type:"link"},{default:(0,n.w5)((()=>[(0,n.Uk)("去添加乘车人")])),_:1}))]),(0,n.Wm)((0,s.SU)(Ot.Z)),(0,n.Wm)((0,s.SU)(ze.ZP),{columns:u,"data-source":(r.dataSource??[]).filter((e=>d.value?.includes(e.id))),locale:{emptyText:"请先选择乘车人"},pagination:!1},{ticketType:(0,n.w5)((({text:e,record:a})=>[(0,n.Wm)((0,s.SU)(y.ZP),{style:t,value:e,onSelect:e=>w(a.id,e)},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,s.SU)(Oe),(e=>((0,n.wg)(),(0,n.j4)((0,s.SU)(y.$m),{value:e.value},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.label),1)])),_:2},1032,["value"])))),256))])),_:2},1032,["value","onSelect"])])),seatType:(0,n.w5)((({text:e,record:a})=>[(0,n.Wm)((0,s.SU)(y.ZP),{style:t,onSelect:e=>m(a.id,e)},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.currentSeat,(e=>((0,n.wg)(),(0,n.j4)((0,s.SU)(y.$m),{value:e.type},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(`${(0,s.SU)(Ke).find((t=>t.code===e.type))?.label}(￥${e.price})`),1)])),_:2},1032,["value"])))),256))])),_:2},1032,["onSelect"])])),realName:(0,n.w5)((({text:e})=>[(0,n.Wm)((0,s.SU)(v.ZP),{value:e,disabled:"",style:t},null,8,["value"])])),idType:(0,n.w5)((({text:e})=>[(0,n.Wm)((0,s.SU)(y.ZP),{disabled:"",style:t,value:e},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,s.SU)(Ye),(e=>((0,n.wg)(),(0,n.j4)((0,s.SU)(y.$m),{value:e.value},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.label),1)])),_:2},1032,["value"])))),256))])),_:2},1032,["value"])])),idCard:(0,n.w5)((({text:e})=>[(0,n.Wm)((0,s.SU)(v.ZP),{disabled:"",value:e,style:t},null,8,["value"])])),edit:(0,n.w5)((({text:e,record:t})=>[(0,n.Wm)((0,s.SU)(Fa.Z),{style:{color:"#fd6a09"},onClick:()=>c(t.id)},null,8,["onClick"])])),_:1},8,["data-source"]),Sl])),_:1}),gl,(0,n._)("div",Ul,[(0,n.Wm)((0,s.SU)(Se.Z),{size:"large"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(_.Z),{onClick:l[2]||(l[2]=()=>(0,s.SU)(Ms).push("/ticketSearch"))},{default:(0,n.w5)((()=>[(0,n.Uk)("上一步")])),_:1}),(0,n.Wm)((0,s.SU)(_.Z),{class:"submit-btn",onClick:l[3]||(l[3]=()=>{f()})},{default:(0,n.w5)((()=>[(0,n.Uk)("提交订单")])),_:1})])),_:1})]),hl])),_:1}),(0,n.Wm)((0,s.SU)(S.Z),{visible:r.open,title:"请核对以下信息","wrap-class-name":"check-info-wrapper",width:"40%",onCancel:l[5]||(l[5]=e=>r.open=!1),footer:null},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Se.Z),{direction:"vertical",style:{width:"100%"}},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n._)("span",bl,(0,i.zw)((0,s.SU)(a).departureDate),1),(0,n._)("span",kl,"（"+(0,i.zw)((0,s.SU)(Le)((0,s.SU)(qe())((0,s.SU)(a).departureDate).day()))+"）",1),(0,n._)("span",Zl,(0,i.zw)((0,s.SU)(a).trainNumber),1),xl,(0,n._)("span",Wl,(0,i.zw)(r.currTrain?.departure),1),jl,(0,n._)("span",zl,"（"+(0,i.zw)(r.currTrain?.departureTime)+"开）——",1),(0,n._)("span",Tl,(0,i.zw)(r.currTrain?.arrival),1),Cl,(0,n._)("span",Pl,"（"+(0,i.zw)(r.currTrain?.duration)+"到）",1)]),(0,n.Wm)((0,s.SU)(ze.ZP),{columns:g,"data-source":r.dataSource,pagination:!1},{seatType:(0,n.w5)((({text:e,record:t})=>[(0,n._)("span",null,(0,i.zw)((0,s.SU)(Ke).find((t=>t.code===e))?.label),1)])),discountType:(0,n.w5)((({text:e})=>[(0,n.Uk)((0,i.zw)((0,s.SU)(Oe).find((t=>t.value===e))?.label),1)])),idType:(0,n.w5)((({text:e})=>[(0,n.Uk)((0,i.zw)((0,s.SU)(Ye).find((t=>t.value===e))?.label),1)])),_:1},8,["data-source"]),r.isChooseSeat&&!(r.dataSource?.length>5)&&r.dataSource?.length<=r.seatPosition.length?((0,n.wg)(),(0,n.iD)("div",Il,[Dl,(0,n._)("div",ql,[(0,n._)("div",null,[(0,n._)("div",Ll,[(0,n.Wm)((0,s.SU)(Qa),{type:"icon-laba001"}),(0,n.Uk)(" 选座咯 ")]),(0,n._)("div",null," 已选座"+(0,i.zw)(r.currentSeatCode.length)+"/"+(0,i.zw)(r.dataSource.length),1)]),(0,n._)("div",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.dataSource?.slice(0,2),((e,t)=>((0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",Rl,[Ol,(0,n.Wm)((0,s.SU)(Ot.Z),{type:"vertical"}),(0,n._)("div",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.seatPosition.slice(0+t*r.seatNumber,(1+t)*r.seatNumber).slice(0,r.seatLeft),((e,t,a)=>((0,n.wg)(),(0,n.iD)("div",{class:(0,i.C_)(["seat-img",{cur:-1!==r.currentSeatCode?.indexOf(e)}]),onClick:()=>h(e)},(0,i.zw)(e.slice(0,1)),11,Nl)))),256)),(0,n.Wm)((0,s.SU)(Ot.Z),{type:"vertical"})]),Hl,(0,n.Wm)((0,s.SU)(Ot.Z),{type:"vertical"}),(0,n._)("div",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.seatPosition.slice(0+t*r.seatNumber,(1+t)*r.seatNumber).slice(r.seatLeft,r.seatNumber),((e,t,a)=>((0,n.wg)(),(0,n.iD)("div",{class:(0,i.C_)(["seat-img",{cur:-1!==r.currentSeatCode?.indexOf(e)}]),onClick:()=>h(e)},(0,i.zw)(e.slice(0,1)),11,Ml)))),256)),(0,n.Wm)((0,s.SU)(Ot.Z),{type:"vertical"})]),Yl])])))),256))])])])):((0,n.wg)(),(0,n.iD)("div",Kl,$l)),(0,n.Wm)((0,s.SU)(Ot.Z),{dashed:""}),(0,n._)("div",Bl,[(0,n.Uk)(" 本次列车，"),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.currentSeat,(e=>((0,n.wg)(),(0,n.iD)("span",null,(0,i.zw)((0,s.SU)(Ke).find((t=>t.code===e.type))?.label)+"余票"+(0,i.zw)(e.quantity)+",",1)))),256))]),(0,n.Wm)((0,s.SU)(Se.Z),{size:"large",style:{width:"100%",textAlign:"center",justifyContent:"center"}},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(_.Z),{onClick:l[4]||(l[4]=e=>r.open=!1)},{default:(0,n.w5)((()=>[(0,n.Uk)("返回修改")])),_:1}),(0,n.Wm)((0,s.SU)(_.Z),{loading:r.loading,style:{backgroundColor:"#ff8001",color:"#fff",border:"none"},onClick:b},{default:(0,n.w5)((()=>[(0,n.Uk)("确认")])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1},8,["visible"])]))}};const Fl=(0,fe.Z)(El,[["__scopeId","data-v-684551b0"]]);var Gl=Fl;const Vl=["innerHTML"];var Jl={__name:"index",setup(e){const{query:t}=(0,o.yj)();return console.log(t.body),setTimeout((()=>{document.forms[0]?.submit()}),100),(e,a)=>((0,n.wg)(),(0,n.iD)("div",{innerHTML:decodeURI((0,s.SU)(t).body)},null,8,Vl))}};const Ql=Jl;var Xl=Ql,en=a(77140),tn=a(27803);const an=e=>((0,n.dD)("data-v-108059f4"),e=e(),(0,n.Cn)(),e),ln={class:"order-date"},nn={class:"border"},sn=an((()=>(0,n._)("span",{class:"border"},(0,i.zw)("--\x3e"),-1))),rn={class:"border"},dn={class:"border"},on={class:"margin"},un={class:"margin"},cn=an((()=>(0,n._)("span",{class:"margin"},"开",-1)));var pn={__name:"index",props:{orderTime:String,departure:String,arrival:String,trainNumber:String,ridingDate:String,departureTime:String},setup(e){const t=e;return(a,l)=>((0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",ln,"订票日期："+(0,i.zw)(t.orderTime),1),(0,n._)("div",null,[(0,n._)("span",nn,(0,i.zw)(e.departure),1),sn,(0,n._)("span",rn,(0,i.zw)(e.arrival),1),(0,n._)("span",dn,(0,i.zw)(t["trainNumber"]),1)]),(0,n._)("div",null,[(0,n._)("span",on,(0,i.zw)(t["ridingDate"]),1),(0,n._)("span",un,(0,i.zw)(t["departureTime"]),1),cn])]))}};const mn=(0,fe.Z)(pn,[["__scopeId","data-v-108059f4"]]);var wn=mn,vn={__name:"index",props:{orderSn:String,cancel:Function,pay:Function},setup(e){const t=e;return(a,l)=>((0,n.wg)(),(0,n.j4)((0,s.SU)(Se.Z),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(_.Z),{onClick:l[0]||(l[0]=()=>t.cancel(e.orderSn)),type:"link"},{default:(0,n.w5)((()=>[(0,n.Uk)("取消订单")])),_:1}),(0,n.Wm)((0,s.SU)(_.Z),{type:"link",onClick:l[1]||(l[1]=()=>t.pay(e.orderSn))},{default:(0,n.w5)((()=>[(0,n.Uk)("去支付")])),_:1})])),_:1}))}};const fn=(0,fe.Z)(vn,[["__scopeId","data-v-3f1c7c82"]]);var _n=fn;const yn={key:0};var Sn={__name:"index",props:{status:Number,refundClick:Function},setup(e){const t=e;return(e,a)=>((0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",null,(0,i.zw)((0,s.SU)(Me).find((e=>e.value===t?.status))?.label??"--"),1),10===t?.status?((0,n.wg)(),(0,n.iD)("div",yn,[(0,n._)("a",{onClick:a[0]||(a[0]=(...e)=>t.refundClick&&t.refundClick(...e))},"退票")])):(0,n.kq)("",!0)],64))}};const gn=(0,fe.Z)(Sn,[["__scopeId","data-v-4448040a"]]);var Un=gn;const hn=e=>((0,n.dD)("data-v-08ecfac3"),e=e(),(0,n.Cn)(),e),bn={class:"card-container"},kn={style:{display:"flex",alignItems:"center"}},Zn={style:{marginRight:"5px",width:"60%"}},xn={key:0,style:{textDecoration:"underline"}},Wn=hn((()=>(0,n._)("span",null,"车",-1))),jn=hn((()=>(0,n._)("span",null,"号",-1))),zn={style:{color:"orange"}},Tn={key:0},Cn={style:{width:"100%",marginTop:"20px",display:"flex",justifyContent:"end"}},Pn=hn((()=>(0,n._)("div",{class:"tips-txt"},[(0,n._)("h2",{style:{fontSize:"16px"}},"温馨提示："),(0,n._)("p",null,"1. 席位已锁定，请在指定时间内完成网上支付。"),(0,n._)("p",null,"2. 逾期未支付，系统将取消本次交易。"),(0,n._)("p",null,"3. 在完成支付或取消订单之前，您将无法购买其他车票"),(0,n._)("p",null," 4. 未尽事宜详见《国铁集团铁路旅客运输规程》《广深港高铁铁路跨境旅客运输组织规则》《中老铁路跨境旅客联运组织规则》等有关规定和车站公告。 ")],-1))),In={style:{padding:"0 30px"}},Dn={style:{padding:"0 30px"}},qn={style:{padding:"0 30px"}},Ln={style:{"margin-bottom":"20px"}},Rn={style:{color:"#999999",padding:"0 30px"}},On=hn((()=>(0,n._)("span",{style:{"margin-left":"20px"}},"实际核收退票费及应退票款将按最终交易时间计算。",-1))),Nn={style:{color:"#999999",padding:"0 30px"}},Hn=hn((()=>(0,n._)("span",{style:{"margin-left":"20px"}},"如你需要办理该次列车前续、后续退票业务，请于退票车次票面开车时间前办理。",-1)));var Mn={__name:"index",setup(e){const t=(0,s.qj)({activeKey:0,dataSource:[],data:null,current:1,size:10,loading:!1,columns:[],checkList:[],checkedAll:!1,visible:!1,currentOrder:void 0,refundOrder:[]}),a=U.Z.get("userId"),l=(0,o.tv)(),r=[{title:"车次信息",dataIndex:"arrival",key:"arrival",slots:{customRender:"info"},customRender:({text:e,record:t})=>({children:(0,n.h)(wn,{trainNumber:t?.trainNumber,orderTime:t?.orderTime,arrival:t?.arrival,departure:t?.departure,ridingDate:t?.ridingDate,departureTime:t?.departureTime}),props:{rowSpan:t?.rowSpan}})},{title:"旅客信息",dataIndex:"id",key:"id",slots:{customRender:"id"}},{title:"席位信息",dataIndex:"seatType",key:"seatType",slots:{customRender:"seatType"}},{title:"票价",dataIndex:"amount",key:"amount",slots:{customRender:"amount"}},{title:"车票状态",dataIndex:"status",key:"status",slots:{customRender:"status"},customRender:({text:e,record:a})=>({children:(0,n.h)(Un,{status:a?.status,refundClick:()=>{t.visible=!0,t.currentOrder=a?.orderSn}}),props:{rowSpan:a?.rowSpan}})}];(0,n.YP)((()=>t.activeKey),(e=>{t.columns=0===e?[...r,{title:"操作",dataIndex:"edit",key:"edit",slots:{customRender:"edit"},customRender:({text:e,record:t})=>({children:(0,n.h)(_n,{orderSn:t?.orderSn,cancel:u,pay:c}),props:{rowSpan:t?.rowSpan}})}]:r}),{immediate:!0}),(0,n.YP)((()=>t.checkList),(e=>{t.indeterminate=!!e.length&&e.length<t.dataSource.length,t.checkAll=e.length===t.dataSource.length}));const d=(e,a)=>{t.current=e,t.size=a},u=e=>{N({orderSn:e}).then((e=>{e.success?(p.ZP.success("订单取消成功"),m(t.current,t.size,t.activeKey)):p.ZP.error(e.message)}))},c=e=>{l.push(`/order?sn=${e}`)},m=(e,l,n)=>{O({userId:a,current:e,size:l,statusType:n}).then((e=>{let a=[];e.data.records.map((e=>{e.passengerDetails?.map(((t,l)=>{a.push({...e,...t,rowSpan:0===l?e.passengerDetails.length:0})}))})),t.dataSource=a,t.data=e.data,t.loading=!1})).catch((e=>{console.log(e),t.loading=!1}))};(0,n.YP)((()=>[t.activeKey,t.current,t.size]),(e=>{t.loading=!0;const[a,l,n]=e;m(l,n,a)}),{immediate:!0});const w=()=>{K({orderSn:t.currentOrder,type:0,subOrderRecordIdReqList:t.refundOrder}).then((e=>{t.visible=!1,p.ZP.success("退款成功"),m(t.current,t.size,t.activeKey)}))};return(e,a)=>((0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",bn,[(0,n.Wm)((0,s.SU)(ke.Z),{type:"card","active-key":t.activeKey,"onUpdate:activeKey":a[0]||(a[0]=e=>t.activeKey=e)},{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.j4)((0,s.SU)(Ze.Z),{key:0,tab:"未完成订单"})),((0,n.wg)(),(0,n.j4)((0,s.SU)(Ze.Z),{key:1,tab:"未出行订单"})),((0,n.wg)(),(0,n.j4)((0,s.SU)(Ze.Z),{key:2,tab:"历史订单"}))])),_:1},8,["active-key"])]),(0,n.Wm)((0,s.SU)(ge.ZP),{bordered:!1,style:{padding:"0 10px"}},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(xe.Z),{style:{width:"100%"},value:t.checkList,"onUpdate:value":a[1]||(a[1]=e=>t.checkList=e),onChange:a[2]||(a[2]=e=>{t.checkList=e})},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(ze.ZP),{columns:t.columns,"data-source":t.dataSource,pagination:!1,loading:t.loading,bordered:!0},{id:(0,n.w5)((({text:e,record:a})=>[(0,n._)("div",kn,[(0,n._)("div",null,[(0,n._)("span",Zn,(0,i.zw)(a?.realName),1),0!==t.activeKey?((0,n.wg)(),(0,n.iD)("a",xn,"打印信息单")):(0,n.kq)("",!0)]),(0,n._)("div",null,(0,i.zw)((0,s.SU)(Ye).find((e=>e.value===a?.idType))?.label),1)])])),seatType:(0,n.w5)((({text:e,record:t})=>[(0,n._)("div",null,(0,i.zw)((0,s.SU)(Ke).find((e=>e.code===t?.seatType))?.label),1),(0,n._)("div",null,[(0,n._)("span",null,(0,i.zw)(t?.carriageNumber),1),Wn,(0,n._)("span",null,(0,i.zw)(t?.seatNumber),1),jn])])),amount:(0,n.w5)((({text:e,record:t})=>[(0,n._)("div",null,(0,i.zw)((0,s.SU)(Oe).find((e=>e.value===t?.ticketType))?.label),1),(0,n._)("div",zn,"￥"+(0,i.zw)(t?.amount/100),1)])),status:(0,n.w5)((({text:e,record:a})=>[(0,n._)("div",null,(0,i.zw)((0,s.SU)(Me).find((e=>e.value===a?.status))?.label??"--"),1),10===a?.status?((0,n.wg)(),(0,n.iD)("div",Tn,[(0,n.Wm)((0,s.SU)(_.Z),{type:"link",onClick:()=>{t.visible=!0,t.currentOrder=a?.orderSn}},{default:(0,n.w5)((()=>[(0,n.Uk)("退票")])),_:2},1032,["onClick"])])):(0,n.kq)("",!0)])),_:1},8,["columns","data-source","loading"])])),_:1},8,["value"]),(0,n._)("div",Cn,[(0,n.Wm)((0,s.SU)(en.ZP),{"show-total":e=>`总共 ${t.data?.total} 条`,current:t.current,size:t.size,total:t.data?.total,"show-size-changer":"",onChange:d},null,8,["show-total","current","size","total"])]),Pn])),_:1}),(0,n.Wm)((0,s.SU)(S.Z),{width:"40%",visible:t.visible,title:"退票申请",class:"custom-modal",onCancel:a[6]||(a[6]=e=>t.visible=!1),footer:null},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Ce.Z),{message:"您确认要退款吗？",type:"warning",description:"如有定餐饮或特产，请按规定到网站自行办理退订","show-icon":"",style:{"background-color":"#fff",border:"none"}},{icon:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(tn.Z))])),_:1}),(0,n.Wm)((0,s.SU)(Ot.Z),{dashed:!0}),(0,n._)("div",In,[(0,n.Uk)(" 请选择要退票的订单： "),(0,n.Wm)((0,s.SU)(xe.Z),{value:t.refundOrder,"onUpdate:value":a[3]||(a[3]=e=>t.refundOrder=e),onChange:a[4]||(a[4]=e=>console.log(e,"value")),options:t.dataSource?.find((e=>e.orderSn===t.currentOrder)).passengerDetails.map((e=>({label:e.realName,value:e.id})))},null,8,["value","options"])]),(0,n.Wm)((0,s.SU)(Ot.Z),{dashed:!0}),(0,n._)("div",Dn,[(0,n.Uk)(" 共计退款："),(0,n._)("a",null,(0,i.zw)("¥"+t.dataSource?.find((e=>e.orderSn===t.currentOrder))?.passengerDetails?.filter((e=>t.refundOrder.includes(e.id)))?.map((e=>e.amount))?.reduce(((e,t)=>e+t),0)/100),1)]),(0,n.Wm)((0,s.SU)(Ot.Z),{dashed:!0}),(0,n._)("div",qn,[(0,n._)("div",Ln,[(0,n.Uk)(" 车票票价："),(0,n._)("a",null,(0,i.zw)("¥"+t.dataSource?.find((e=>e.orderSn===t.currentOrder))?.passengerDetails?.filter((e=>t.refundOrder.includes(e.id)))?.map((e=>e.amount))?.reduce(((e,t)=>e+t),0)/100),1)]),(0,n._)("div",null,[(0,n.Uk)(" 应退票款："),(0,n._)("a",null,(0,i.zw)("¥"+t.dataSource?.find((e=>e.orderSn===t.currentOrder))?.passengerDetails?.filter((e=>t.refundOrder.includes(e.id)))?.map((e=>e.amount))?.reduce(((e,t)=>e+t),0)/100),1)])]),(0,n.Wm)((0,s.SU)(Ot.Z),{dashed:!0}),(0,n._)("div",Rn,[(0,n.Wm)((0,s.SU)(tn.Z)),On]),(0,n._)("div",Nn,[(0,n.Wm)((0,s.SU)(tn.Z)),Hn]),(0,n.Wm)((0,s.SU)(Se.Z),{style:{width:"100%","justify-content":"center","margin-top":"20px"}},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(_.Z),{onClick:a[5]||(a[5]=e=>t.visible=!1)},{default:(0,n.w5)((()=>[(0,n.Uk)("取消")])),_:1}),(0,n.Wm)((0,s.SU)(_.Z),{onClick:w,type:"primary",disabled:!t.refundOrder.length},{default:(0,n.w5)((()=>[(0,n.Uk)("确定")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["visible"])],64))}};const Yn=(0,fe.Z)(Mn,[["__scopeId","data-v-08ecfac3"]]);var Kn=Yn,An=a(82227),$n=a(55114),Bn=a(30381),En=a.n(Bn);const Fn={style:{padding:"20px 0"}},Gn={key:0,class:"list-container"},Vn={class:"list"},Jn={class:"list-item-container"},Qn={class:"train-number"},Xn={class:"da-container flex2"},es={class:"d-container"},ts={class:"city"},as={class:"time"},ls={class:"arrow-container"},ns={class:"d-container"},ss={class:"city"},is={class:"time"},rs={class:"d-container"},ds={class:"seat"},os={class:"carriage"},us={class:"flex2"},cs={class:"ticket"},ps={class:"amount"},ms={style:{"font-weight":"bolder"}},ws={class:"button-container"},vs={style:{padding:"10px 0",display:"flex","justify-content":"end"}};var fs={__name:"index",setup(e){const{RangePicker:t}=be["default"],a=(0,s.qj)({data:[],total:100,size:10,current:1,loading:!1}),l=(e,t)=>{a.loading=!0,Y({current:e,size:t}).then((e=>{a.data=e.data?.records,a.total=e.data?.total,a.loading=!1})).catch((()=>a.loading=!1))};return(0,n.YP)((()=>[a.current,a.size]),(e=>{a.loading=!0;const[t,n]=e;l(t,n)}),{immediate:!0}),(e,l)=>((0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",Fn,[(0,n.Wm)((0,s.SU)(m.ZP),{layout:"inline"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(w.Z),{label:"乘车日期"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(t))])),_:1}),(0,n.Wm)((0,s.SU)(w.Z),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(je.ZP),null,{default:(0,n.w5)((()=>[(0,n.Uk)("学生票")])),_:1})])),_:1}),(0,n.Wm)((0,s.SU)(_.Z),{type:"primary","html-type":"submit"},{default:(0,n.w5)((()=>[(0,n.Uk)("查询")])),_:1})])),_:1})]),e.loading?((0,n.wg)(),(0,n.j4)((0,s.SU)(oa.Z),{key:1,spinning:!0})):((0,n.wg)(),(0,n.iD)("div",Gn,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.data,(e=>((0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)((0,s.SU)(An.Z),{text:e.ridingDate+(0,s.SU)(Le)((0,s.SU)(qe())(e.ridingDate).day()),placement:"start"},{default:(0,n.w5)((()=>[(0,n._)("div",Vn,[(0,n._)("div",Jn,[(0,n._)("div",Qn,(0,i.zw)(e.trainNumber),1),(0,n._)("div",Xn,[(0,n._)("div",es,[(0,n._)("div",ts,(0,i.zw)(e.departure),1),(0,n._)("div",as,(0,i.zw)(e.departureTime+"开"),1)]),(0,n._)("div",ls,[(0,n.Wm)((0,s.SU)(Ie.Z),{style:{"font-size":"30px",color:"#448ef7"}}),(0,n.Wm)((0,s.SU)($n.ZP),null,{default:(0,n.w5)((()=>[(0,n.Uk)("车次当日有效")])),_:1})]),(0,n._)("div",ns,[(0,n._)("div",ss,(0,i.zw)(e.arrival),1),(0,n._)("div",is,(0,i.zw)(e.arrivalTime+"开"),1)])]),(0,n._)("div",rs,[(0,n._)("div",ds,(0,i.zw)((0,s.SU)(Ke).find((t=>t.code===e.seatType))?.label),1),(0,n._)("div",os,(0,i.zw)(e.carriageNumber+"车"+e.seatNumber+"号"),1)]),(0,n._)("div",us,[(0,n._)("span",cs,(0,i.zw)((0,s.SU)(Ne).find((t=>t.value===e.ticketType))?.label+"票"),1),(0,n._)("span",ps,(0,i.zw)((e.amount/100)?.toFixed(2)),1)]),(0,n._)("div",ms,(0,i.zw)((0,s.SU)(En())(e?.ridingDate??new Date).isAfter((0,s.SU)(En())())?"未出战":"已出站"),1)]),(0,n.Wm)((0,s.SU)(Ot.Z)),(0,n._)("div",ws,[(0,n.Wm)((0,s.SU)(Se.Z),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(_.Z),{disabled:""},{default:(0,n.w5)((()=>[(0,n.Uk)("线上购票")])),_:1}),(0,n.Wm)((0,s.SU)(_.Z),{disabled:""},{default:(0,n.w5)((()=>[(0,n.Uk)("非现金支付")])),_:1})])),_:1}),(0,n.Wm)((0,s.SU)(Se.Z),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(_.Z),{disabled:""},{default:(0,n.w5)((()=>[(0,n.Uk)("改签")])),_:1}),(0,n.Wm)((0,s.SU)(_.Z),{disabled:""},{default:(0,n.w5)((()=>[(0,n.Uk)("变更车站")])),_:1}),(0,n.Wm)((0,s.SU)(_.Z),{disabled:""},{default:(0,n.w5)((()=>[(0,n.Uk)("餐饮·特产")])),_:1}),(0,n.Wm)((0,s.SU)(_.Z),{disabled:""},{default:(0,n.w5)((()=>[(0,n.Uk)("打印信息单")])),_:1})])),_:1})])])])),_:2},1032,["text"])])))),256))])),(0,n._)("div",vs,[(0,n.Wm)((0,s.SU)(en.ZP),{current:a.current,total:a.total,"page-size":a.size,onChange:l[0]||(l[0]=(e,t)=>{a.current=e,a.size=t}),"show-total":e=>`共${e}条`,"show-size-changer":!0},null,8,["current","total","page-size","show-total"])])],64))}};const _s=(0,fe.Z)(fs,[["__scopeId","data-v-1c0086e2"]]);var ys=_s;const Ss=e=>((0,n.dD)("data-v-43b5db8a"),e=e(),(0,n.Cn)(),e),gs={class:"info-container"},Us={class:"icon"},hs={class:"info"},bs={class:"top"},ks=Ss((()=>(0,n._)("span",{class:"success-text"},"交易已完成",-1))),Zs=Ss((()=>(0,n._)("span",{class:"thank-text"},"感谢你选择铁路出行！您的订单号是：",-1))),xs={class:"order-text"},Ws={class:"tip-text"},js={class:"custom"},zs={class:"ticket-info"},Ts={class:"main-text"},Cs=Ss((()=>(0,n._)("span",{class:"small-text"},"次",-1))),Ps={class:"main-text"},Is=Ss((()=>(0,n._)("span",{class:"small-text"},"站",-1))),Ds={class:"main-text"},qs={class:"small-text"};var Ls={__name:"index",setup(e){const t=[{title:"序号",dataIndex:"id",customRender:({text:e,record:t,index:a})=>(0,n.h)("div",{innerHTML:a+1})},{title:"姓名",dataIndex:"realName"},{title:"证件类型",dataIndex:"idType",customRender:({text:e})=>(0,n.h)("div",{innerHTML:Ye.find((t=>t.value===e))?.label})},{title:"证件号码",dataIndex:"idCard"},{title:"票种",dataIndex:"ticketType",customRender:({text:e})=>(0,n.h)("div",{innerHTML:Oe.find((t=>t.value===e))?.label})},{title:"席别",dataIndex:"seatType",customRender:({text:e})=>(0,n.h)("div",{innerHTML:Ke.find((t=>t.code===e))?.label})},{title:"车厢",dataIndex:"carriageNumber",customRender:({text:e})=>(0,n.h)("div",{innerHTML:e+"车"})},{title:"席位号",dataIndex:"seatNumber"},{title:"票价（元）",dataIndex:"amount",customRender:({text:e})=>(0,n.h)("a",{innerHTML:e/100+"¥"})},{title:"订单状态",dataIndex:"status",customRender:({text:e})=>(0,n.h)("div",{innerHTML:Me.find((t=>t.value===e))?.label})}],{query:a}=(0,o.yj)(),l=(0,o.tv)(),r=(0,s.qj)({orderDetail:null,userInfo:null});return(0,n.bv)((()=>{I({orderSn:a?.orderSn}).then((e=>{r.orderDetail=e?.data})),L({username:U.Z.get("username")}).then((e=>{r.userInfo=e?.data}))})),(e,a)=>((0,n.wg)(),(0,n.j4)((0,s.SU)(Se.Z),{direction:"vertical",style:{width:"100%"}},{default:(0,n.w5)((()=>[(0,n._)("div",gs,[(0,n._)("div",Us,[(0,n.Wm)((0,s.SU)(Qa),{type:"icon-wancheng",style:{"font-size":"50px"}})]),(0,n._)("div",hs,[(0,n._)("div",bs,[ks,Zs,(0,n._)("span",xs,(0,i.zw)(r?.orderDetail?.orderSn),1)]),(0,n._)("div",null,[(0,n._)("span",Ws,(0,i.zw)(r.userInfo?.realName)+" 先生/女士可持购票时所使用的中国居民身份证原件于购票后、列车开车前到车站直接检票乘车",1)])])]),(0,n._)("div",js,[(0,n.Wm)((0,s.SU)(ge.ZP),{title:"订单信息"},{default:(0,n.w5)((()=>[(0,n._)("div",zs,[(0,n._)("span",Ts,(0,i.zw)(r.orderDetail?.ridingDate)+"（"+(0,i.zw)((0,s.SU)(Le)((0,s.SU)(qe())(r.orderDetail?.ridingDate).day()))+"）"+(0,i.zw)(r.orderDetail?.trainNumber),1),Cs,(0,n._)("span",Ps,(0,i.zw)(r.orderDetail?.departure),1),Is,(0,n._)("span",Ds,"（"+(0,i.zw)(r.orderDetail?.departureTime)+"开）-"+(0,i.zw)(r.orderDetail?.arrival),1),(0,n._)("span",qs,"站（"+(0,i.zw)(r.orderDetail?.arrivalTime)+"到）",1)]),(0,n.Wm)((0,s.SU)(ze.ZP),{columns:t,size:"small","data-source":r.orderDetail?.passengerDetails,pagination:!1},null,8,["data-source"]),(0,n.Wm)((0,s.SU)(Ot.Z)),(0,n.Wm)((0,s.SU)(Se.Z),{style:{"justify-content":"center",width:"100%"}},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(_.Z),{disabled:!0},{default:(0,n.w5)((()=>[(0,n.Uk)("餐饮·特产")])),_:1}),(0,n.Wm)((0,s.SU)(_.Z),{onClick:a[0]||(a[0]=e=>(0,s.SU)(l).push("/ticketSearch"))},{default:(0,n.w5)((()=>[(0,n.Uk)("继续购票")])),_:1}),(0,n.Wm)((0,s.SU)(_.Z),{onClick:a[1]||(a[1]=e=>(0,s.SU)(l).push("/ticketList"))},{default:(0,n.w5)((()=>[(0,n.Uk)("查询订单详情")])),_:1})])),_:1})])),_:1})])])),_:1}))}};const Rs=(0,fe.Z)(Ls,[["__scopeId","data-v-43b5db8a"]]);var Os=Rs;const Ns=[{path:"/",name:"index",meta:{requiresAuth:!1},redirect:e=>"/ticketSearch"},{path:"/login",name:"login",component:ye,meta:{requiresAuth:!1}},{label:"车票查询",path:"/ticketSearch",name:"ticketSearch",component:Lt,icon:"icon-chaxun",meta:{requiresAuth:!1}},{label:"用户信息",path:"/userInfo",name:"userInfo",component:Jt,icon:"icon-ic_account",meta:{requiresAuth:!0}},{label:"人员信息",path:"/passenger",name:"passenger",component:sa,icon:"icon-renyuanfenbu",meta:{requiresAuth:!0}},{label:"我的车票",path:"/myTicket",name:"myTicket",component:da,icon:"icon-dingdan",meta:{requiresAuth:!0}},{label:"我的订单",path:"/order",name:"order",component:Oa,icon:"icon-dingdan",meta:{requiresAuth:!0}},{label:"添加乘车人",path:"/addPassenger",name:"addPassenger",component:Ma,icon:"icon-icon-adduser",meta:{requiresAuth:!0}},{label:"结算",path:"/checkOrder",name:"checkOrder",component:Ea,icon:"icon-goumai",meta:{requiresAuth:!0}},{label:"购买车票",path:"/buyTicket",name:"buyTicket",component:Gl,icon:"icon-goumai",meta:{requiresAuth:!0}},{label:"支付宝支付",path:"/aliPay",name:"aliPay",component:Xl,icon:"icon-zhifubao0",meta:{requiresAuth:!0}},{label:"订单列表",path:"/ticketList",name:"ticketList",component:Kn,icon:"icon-zhifubao0",meta:{requiresAuth:!0}},{label:"本人车票",path:"/personalTicket",name:"personalTicket",component:ys,icon:"icon-dingdan",meta:{requiresAuth:!1}},{label:"支付成功",path:"/paySuccess",name:"paySuccess",component:Os,icon:"icon-zhifuchenggong",meta:{requiresAuth:!1}}],Hs=(0,o.p7)({history:(0,o.PO)("/"),routes:Ns});Hs.beforeEach((async(e,t)=>{if(e.meta?.requiresAuth&&"login"!==e.name&&(!U.Z.get("username")||!U.Z.get("token")))return p.ZP.error("用户未登录或已过期！"),{name:"login"}}));var Ms=Hs;const Ys=e=>((0,n.dD)("data-v-48fd513e"),e=e(),(0,n.Cn)(),e),Ks=Ys((()=>(0,n._)("span",null,"12306",-1)));var As={__name:"index",setup(e){const t=(0,o.yj)(),a=(0,s.iH)(null);return(0,n.YP)((()=>t.path),(e=>{a.value=Ns.find((t=>t?.path===e))}),{immediate:!0}),(e,t)=>((0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)((0,s.SU)(u.ZP),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(c.Z),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Qa),{type:"icon-huochezhanxiao"}),Ks])),_:1}),(0,n.Wm)((0,s.SU)(c.Z),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Qa),{type:a.value?.icon,color:"black"},null,8,["type"]),(0,n._)("span",null,(0,i.zw)(a.value?.label),1)])),_:1})])),_:1})]))}};const $s=(0,fe.Z)(As,[["__scopeId","data-v-48fd513e"]]);var Bs=$s,Es=a(97108),Fs=a.p+"img/logo.9d665b55.png",Gs=a(6723),Vs=a(23672),Js=a(38629),Qs=a(38669);const Xs=e=>((0,n.dD)("data-v-eb84ec70"),e=e(),(0,n.Cn)(),e),ei={class:"header-wrapper"},ti={class:"nav-list-wrapper"},ai=Xs((()=>(0,n._)("li",null,"首页",-1))),li={key:0},ni={style:{padding:"0 0 0 30px"}};var si={__name:"index",props:{isLogin:Boolean},setup(e){const t=e,a=U.Z.get("username"),{Header:l}=r["default"],{isLogin:d}=(0,s.BK)(t),u=(0,s.qj)({username:a}),c=(0,o.tv)(),m=(0,o.yj)();(0,n.YP)((()=>m.fullPath),(e=>{u.username=a}),{immediate:!0});const w=()=>{const e=U.Z.get("token");C({accessToken:e}).then((e=>{e.success&&(p.ZP.success("退出成功"),location.href="login",U.Z.remove("token"),U.Z.remove("username"))}))};return(e,t)=>{const a=(0,n.up)("router-link");return(0,n.wg)(),(0,n.j4)((0,s.SU)(l),{class:(0,i.C_)({isLogin:(0,s.SU)(d)})},{default:(0,n.w5)((()=>[(0,n._)("div",ei,[(0,n._)("div",null,[(0,n._)("img",{onClick:t[0]||(t[0]=e=>(0,s.SU)(c).push("/ticketSearch")),class:"logo",src:Fs,alt:"logo"})]),(0,n._)("div",null,[(0,n._)("ul",ti,[(0,n.Wm)(a,{to:"/ticketSearch"},{default:(0,n.w5)((()=>[ai])),_:1}),"/login"!==(0,s.SU)(m).fullPath?((0,n.wg)(),(0,n.iD)("a",li,[(0,n.Wm)((0,s.SU)(Gs.ZP),{trigger:["click"]},{overlay:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Vs["default"]),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Js.Z),null,{default:(0,n.w5)((()=>[(0,n._)("a",{onClick:t[1]||(t[1]=()=>(0,s.SU)(c).push("/userInfo"))},"个人信息")])),_:1}),(0,n.Wm)((0,s.SU)(Js.Z),null,{default:(0,n.w5)((()=>[(0,n._)("a",{onClick:t[2]||(t[2]=()=>w())},"退出登录")])),_:1})])),_:1})])),default:(0,n.w5)((()=>[(0,n._)("li",ni,[(0,n.Wm)((0,s.SU)(Qs.ZP),{shape:"square",style:{"background-color":"#1890ff"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(u.username?.slice(0,1)?.toUpperCase()),1)])),_:1})])])),_:1})])):(0,n.kq)("",!0)])])])])),_:1},8,["class"])}}};const ii=(0,fe.Z)(si,[["__scopeId","data-v-eb84ec70"]]);var ri=ii,di={__name:"index",props:{isLogin:Boolean},setup(e){const{SubMenu:t,Item:a}=Vs["default"],{Sider:l}=r["default"],d=(0,s.qj)({collapse:!1}),u=()=>{const e=U.Z.get("token");C({accessToken:e}).then((e=>{e.success&&(p.ZP.success("退出成功"),location.href="login",U.Z.remove("token"),U.Z.remove("username"))}))};return(e,r)=>((0,n.wg)(),(0,n.iD)("div",{style:(0,i.j5)({position:"relative",minWidth:d.collapse?"80px":"200px",height:"calc(100vh - 64px)"})},[(0,n.Wm)((0,s.SU)(l),{collapsed:d.collapse,collapsible:"",trigger:null,onCollapse:r[1]||(r[1]=()=>d.collapse=!d.collapse)},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Vs["default"]),{selectedKeys:e.selectedKeys,"onUpdate:selectedKeys":r[0]||(r[0]=t=>e.selectedKeys=t),mode:"inline"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(t),{key:"sub1",onTitleClick:e.titleClick},{icon:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Qa),{type:"icon-icon_yingyongguanli"})])),title:(0,n.w5)((()=>[(0,n.Uk)("车票管理 ")])),default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(a),{key:"ticketSearch"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(o.rH),{to:"/ticketSearch"},{default:(0,n.w5)((()=>[(0,n.Uk)("车票查询")])),_:1})])),_:1})])),_:1},8,["onTitleClick"]),(0,n.Wm)((0,s.SU)(t),{key:"sub2",onTitleClick:e.titleClick},{icon:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Qa),{type:"icon-pingtaixinxiguanli"})])),title:(0,n.w5)((()=>[(0,n.Uk)("常用信息管理")])),default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(a),{key:"userInfo"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(o.rH),{to:"/userInfo"},{default:(0,n.w5)((()=>[(0,n.Uk)("个人信息")])),_:1})])),_:1}),(0,n.Wm)((0,s.SU)(a),{key:"passenger"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(o.rH),{to:"/passenger"},{default:(0,n.w5)((()=>[(0,n.Uk)("乘车人")])),_:1})])),_:1})])),_:1},8,["onTitleClick"]),(0,n.Wm)((0,s.SU)(t),{key:"sub4",onTitleClick:e.titleClick},{icon:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(Qa),{type:"icon-dingdan"})])),title:(0,n.w5)((()=>[(0,n.Uk)("订单管理")])),default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(a),{key:"order"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(o.rH),{to:"/ticketList"},{default:(0,n.w5)((()=>[(0,n.Uk)("车票订单")])),_:1})])),_:1}),(0,n.Wm)((0,s.SU)(a),{key:"personalTicket"},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(o.rH),{to:"/personalTicket"},{default:(0,n.w5)((()=>[(0,n.Uk)("本人车票")])),_:1})])),_:1})])),_:1},8,["onTitleClick"])])),_:1},8,["selectedKeys"])])),_:1},8,["collapsed"]),(0,n._)("div",{class:"sider-footer",style:(0,i.j5)({width:d.collapse?"80px":"200px"})},[(0,n.Wm)((0,s.SU)(Te.Z),{title:"折起"},{default:(0,n.w5)((()=>[(0,n._)("div",{class:(0,i.C_)([d.collapse&&"collaspe-icon","icon-wrapper"]),onClick:r[2]||(r[2]=()=>d.collapse=!d.collapse)},[(0,n.Wm)((0,s.SU)(Qa),{type:"icon-zhedie"})],2)])),_:1}),d.collapse?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)((0,s.SU)(Ot.Z),{key:0,type:"vertical"})),(0,n.Wm)((0,s.SU)(Te.Z),{title:"退出登录"},{default:(0,n.w5)((()=>[d.collapse?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",{key:0,onClick:u,class:"icon-wrapper"},[(0,n.Wm)((0,s.SU)(Qa),{type:"icon-tuichudenglu"})]))])),_:1})],4)],4))}};const oi=(0,fe.Z)(di,[["__scopeId","data-v-1f901570"]]);var ui=oi,ci=a(1646),pi=a.n(ci),mi={__name:"App",setup(e){qe().extend(pi());(0,s.qj)();const{Content:t}=r["default"],a=(0,s.iH)(!1),l=(0,o.yj)();return(0,n.bv)((()=>{const e=U.Z.get("token");e&&(b.defaults.headers.common["Authorization"]=e),window.addEventListener("hashchange",(()=>{console.log(location.pathname,"change")}))})),(0,n.YP)((()=>l.path),(e=>{a.value="/login"===e})),(e,l)=>{const o=(0,n.up)("router-view");return(0,n.wg)(),(0,n.j4)((0,s.SU)(d.ZP),{locale:(0,s.SU)(Es.Z)},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(r["default"]),null,{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(ri),{isLogin:a.value},null,8,["isLogin"]),(0,n.Wm)((0,s.SU)(r["default"]),{class:(0,i.C_)(["page-wrapper",{isLogin:a.value}])},{default:(0,n.w5)((()=>[a.value?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)((0,s.SU)(ui),{key:0})),(0,n.Wm)((0,s.SU)(t),{class:(0,i.C_)(["app-wrapper",{isLogin:a.value}])},{default:(0,n.w5)((()=>[(0,n.Wm)((0,s.SU)(d.ZP),{locale:(0,s.SU)(Es.Z)},{default:(0,n.w5)((()=>[a.value?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)((0,s.SU)(Bs),{key:0})),(0,n.Uk)(),(0,n.Wm)(o)])),_:1},8,["locale"])])),_:1},8,["class"])])),_:1},8,["class"])])),_:1})])),_:1},8,["locale"])}}};const wi=(0,fe.Z)(mi,[["__scopeId","data-v-5a4b5ddd"]]);var vi=wi,fi=a(65616);a(67518),a(33852);qe().locale("zh-cn");const _i=(0,l.ri)(vi);_i.use(Ms).use(fi.ZP).mount("#app")}},t={};function a(l){var n=t[l];if(void 0!==n)return n.exports;var s=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(s.exports,s,s.exports,a),s.loaded=!0,s.exports}a.m=e,function(){var e=[];a.O=function(t,l,n,s){if(!l){var i=1/0;for(u=0;u<e.length;u++){l=e[u][0],n=e[u][1],s=e[u][2];for(var r=!0,d=0;d<l.length;d++)(!1&s||i>=s)&&Object.keys(a.O).every((function(e){return a.O[e](l[d])}))?l.splice(d--,1):(r=!1,s<i&&(i=s));if(r){e.splice(u--,1);var o=n();void 0!==o&&(t=o)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[l,n,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var n,s,i=l[0],r=l[1],d=l[2],o=0;if(i.some((function(t){return 0!==e[t]}))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(d)var u=d(a)}for(t&&t(l);o<i.length;o++)s=i[o],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(u)},l=self["webpackChunkconsole_vue"]=self["webpackChunkconsole_vue"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[998],(function(){return a(66292)}));l=a.O(l)})();
//# sourceMappingURL=app.6f824268.js.map